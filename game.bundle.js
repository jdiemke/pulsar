(()=>{"use strict";var t={5426:(t,e,r)=>{r.d(e,{Z:()=>s});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([t.id,"html {\n    height: 100%;\n}\n\n.center-content {\n    display: flex;\n    width: 100%;\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n    margin: 0px;\n    padding: 0px;\n    background-color: #333333;\n}\n\n.canvas {\n    border: 1px solid black;\n}\n",""]);const s=i},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r="",n=void 0!==e[5];return e[4]&&(r+="@supports (".concat(e[4],") {")),e[2]&&(r+="@media ".concat(e[2]," {")),n&&(r+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),r+=t(e),n&&(r+="}"),e[2]&&(r+="}"),e[4]&&(r+="}"),r})).join("")},e.i=function(t,r,n,a,o){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var u=0;u<t.length;u++){var h=[].concat(t[u]);n&&i[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),r&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=r):h[2]=r),a&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=a):h[4]="".concat(a)),e.push(h))}},e}},8081:t=>{t.exports=function(t){return t[1]}},887:(t,e,r)=>{r.r(e),r.d(e,{glMatrix:()=>n,mat2:()=>a,mat2d:()=>o,mat3:()=>i,mat4:()=>s,quat:()=>h,quat2:()=>l,vec2:()=>d,vec3:()=>c,vec4:()=>u});var n={};r.r(n),r.d(n,{ARRAY_TYPE:()=>M,EPSILON:()=>f,RANDOM:()=>x,equals:()=>v,setMatrixArrayType:()=>m,toRadian:()=>b});var a={};r.r(a),r.d(a,{LDU:()=>O,add:()=>j,adjoint:()=>P,clone:()=>w,copy:()=>y,create:()=>g,determinant:()=>_,equals:()=>q,exactEquals:()=>N,frob:()=>F,fromRotation:()=>V,fromScaling:()=>D,fromValues:()=>E,identity:()=>T,invert:()=>L,mul:()=>k,multiply:()=>R,multiplyScalar:()=>z,multiplyScalarAndAdd:()=>W,rotate:()=>U,scale:()=>C,set:()=>A,str:()=>I,sub:()=>G,subtract:()=>B,transpose:()=>S});var o={};r.r(o),r.d(o,{add:()=>ut,clone:()=>Y,copy:()=>H,create:()=>X,determinant:()=>J,equals:()=>Mt,exactEquals:()=>ft,frob:()=>ct,fromRotation:()=>at,fromScaling:()=>ot,fromTranslation:()=>it,fromValues:()=>Z,identity:()=>K,invert:()=>$,mul:()=>xt,multiply:()=>tt,multiplyScalar:()=>lt,multiplyScalarAndAdd:()=>dt,rotate:()=>et,scale:()=>rt,set:()=>Q,str:()=>st,sub:()=>mt,subtract:()=>ht,translate:()=>nt});var i={};r.r(i),r.d(i,{add:()=>qt,adjoint:()=>St,clone:()=>vt,copy:()=>gt,create:()=>pt,determinant:()=>Lt,equals:()=>Xt,exactEquals:()=>Gt,frob:()=>Nt,fromMat2d:()=>It,fromMat4:()=>bt,fromQuat:()=>Ft,fromRotation:()=>Vt,fromScaling:()=>Dt,fromTranslation:()=>Ct,fromValues:()=>wt,identity:()=>Tt,invert:()=>At,mul:()=>Yt,multiply:()=>Pt,multiplyScalar:()=>Wt,multiplyScalarAndAdd:()=>kt,normalFromMat4:()=>Ot,projection:()=>jt,rotate:()=>Rt,scale:()=>Ut,set:()=>yt,str:()=>Bt,sub:()=>Ht,subtract:()=>zt,translate:()=>_t,transpose:()=>Et});var s={};r.r(s),r.d(s,{add:()=>je,adjoint:()=>ne,clone:()=>Zt,copy:()=>Qt,create:()=>Kt,determinant:()=>ae,equals:()=>We,exactEquals:()=>ze,frob:()=>Oe,fromQuat:()=>Ae,fromQuat2:()=>ve,fromRotation:()=>Me,fromRotationTranslation:()=>be,fromRotationTranslationScale:()=>Te,fromRotationTranslationScaleOrigin:()=>Ee,fromScaling:()=>fe,fromTranslation:()=>de,fromValues:()=>$t,fromXRotation:()=>xe,fromYRotation:()=>me,fromZRotation:()=>pe,frustum:()=>Se,getRotation:()=>ye,getScaling:()=>we,getTranslation:()=>ge,identity:()=>te,invert:()=>re,lookAt:()=>De,mul:()=>ke,multiply:()=>oe,multiplyScalar:()=>Ne,multiplyScalarAndAdd:()=>qe,ortho:()=>Ce,orthoNO:()=>Ue,orthoZO:()=>Ve,perspective:()=>Pe,perspectiveFromFieldOfView:()=>Re,perspectiveNO:()=>Le,perspectiveZO:()=>_e,rotate:()=>ce,rotateX:()=>ue,rotateY:()=>he,rotateZ:()=>le,scale:()=>se,set:()=>Jt,str:()=>Fe,sub:()=>Ge,subtract:()=>Be,targetTo:()=>Ie,translate:()=>ie,transpose:()=>ee});var c={};r.r(c),r.d(c,{add:()=>$e,angle:()=>Lr,bezier:()=>vr,ceil:()=>rr,clone:()=>Ye,copy:()=>Ze,create:()=>Xe,cross:()=>mr,dist:()=>Fr,distance:()=>ur,div:()=>Ir,divide:()=>er,dot:()=>xr,equals:()=>Ur,exactEquals:()=>Rr,floor:()=>nr,forEach:()=>Nr,fromValues:()=>Ke,hermite:()=>br,inverse:()=>fr,len:()=>jr,length:()=>He,lerp:()=>pr,max:()=>or,min:()=>ar,mul:()=>Dr,multiply:()=>tr,negate:()=>dr,normalize:()=>Mr,random:()=>gr,rotateX:()=>Er,rotateY:()=>Ar,rotateZ:()=>Sr,round:()=>ir,scale:()=>sr,scaleAndAdd:()=>cr,set:()=>Qe,sqrDist:()=>Or,sqrLen:()=>Br,squaredDistance:()=>hr,squaredLength:()=>lr,str:()=>_r,sub:()=>Vr,subtract:()=>Je,transformMat3:()=>yr,transformMat4:()=>wr,transformQuat:()=>Tr,zero:()=>Pr});var u={};r.r(u),r.d(u,{add:()=>Xr,ceil:()=>Zr,clone:()=>zr,copy:()=>kr,create:()=>qr,cross:()=>dn,dist:()=>En,distance:()=>nn,div:()=>Tn,divide:()=>Kr,dot:()=>ln,equals:()=>gn,exactEquals:()=>vn,floor:()=>Qr,forEach:()=>Pn,fromValues:()=>Wr,inverse:()=>un,len:()=>Sn,length:()=>on,lerp:()=>fn,max:()=>Jr,min:()=>$r,mul:()=>yn,multiply:()=>Hr,negate:()=>cn,normalize:()=>hn,random:()=>Mn,round:()=>tn,scale:()=>en,scaleAndAdd:()=>rn,set:()=>Gr,sqrDist:()=>An,sqrLen:()=>Ln,squaredDistance:()=>an,squaredLength:()=>sn,str:()=>bn,sub:()=>wn,subtract:()=>Yr,transformMat4:()=>xn,transformQuat:()=>mn,zero:()=>pn});var h={};r.r(h),r.d(h,{add:()=>oa,calculateW:()=>jn,clone:()=>ea,conjugate:()=>Gn,copy:()=>na,create:()=>_n,dot:()=>ca,equals:()=>ma,exactEquals:()=>xa,exp:()=>Bn,fromEuler:()=>Yn,fromMat3:()=>Xn,fromValues:()=>ra,getAngle:()=>Vn,getAxisAngle:()=>Cn,identity:()=>Rn,invert:()=>kn,len:()=>la,length:()=>ha,lerp:()=>ua,ln:()=>Nn,mul:()=>ia,multiply:()=>Dn,normalize:()=>Ma,pow:()=>qn,random:()=>Wn,rotateX:()=>In,rotateY:()=>Fn,rotateZ:()=>On,rotationTo:()=>pa,scale:()=>sa,set:()=>aa,setAxes:()=>va,setAxisAngle:()=>Un,slerp:()=>zn,sqlerp:()=>ba,sqrLen:()=>fa,squaredLength:()=>da,str:()=>Hn});var l={};r.r(l),r.d(l,{add:()=>Wa,clone:()=>wa,conjugate:()=>Za,copy:()=>Pa,create:()=>ga,dot:()=>Ya,equals:()=>ao,exactEquals:()=>no,fromMat4:()=>La,fromRotation:()=>Sa,fromRotationTranslation:()=>Ea,fromRotationTranslationValues:()=>Ta,fromTranslation:()=>Aa,fromValues:()=>ya,getDual:()=>Ca,getReal:()=>Ua,getTranslation:()=>Ia,identity:()=>_a,invert:()=>Ka,len:()=>$a,length:()=>Qa,lerp:()=>Ha,mul:()=>Ga,multiply:()=>ka,normalize:()=>eo,rotateAroundAxis:()=>za,rotateByQuatAppend:()=>Na,rotateByQuatPrepend:()=>qa,rotateX:()=>Oa,rotateY:()=>ja,rotateZ:()=>Ba,scale:()=>Xa,set:()=>Ra,setDual:()=>Da,setReal:()=>Va,sqrLen:()=>to,squaredLength:()=>Ja,str:()=>ro,translate:()=>Fa});var d={};r.r(d),r.d(d,{add:()=>ho,angle:()=>jo,ceil:()=>xo,clone:()=>io,copy:()=>co,create:()=>oo,cross:()=>Ro,dist:()=>Yo,distance:()=>yo,div:()=>Xo,divide:()=>Mo,dot:()=>_o,equals:()=>zo,exactEquals:()=>qo,floor:()=>mo,forEach:()=>Zo,fromValues:()=>so,inverse:()=>Lo,len:()=>Wo,length:()=>Eo,lerp:()=>Uo,max:()=>bo,min:()=>po,mul:()=>Go,multiply:()=>fo,negate:()=>So,normalize:()=>Po,random:()=>Co,rotate:()=>Oo,round:()=>vo,scale:()=>go,scaleAndAdd:()=>wo,set:()=>uo,sqrDist:()=>Ho,sqrLen:()=>Ko,squaredDistance:()=>To,squaredLength:()=>Ao,str:()=>No,sub:()=>ko,subtract:()=>lo,transformMat2:()=>Vo,transformMat2d:()=>Do,transformMat3:()=>Io,transformMat4:()=>Fo,zero:()=>Bo});var f=1e-6,M="undefined"!=typeof Float32Array?Float32Array:Array,x=Math.random;function m(t){M=t}var p=Math.PI/180;function b(t){return t*p}function v(t,e){return Math.abs(t-e)<=f*Math.max(1,Math.abs(t),Math.abs(e))}function g(){var t=new M(4);return M!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function w(t){var e=new M(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function y(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function T(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function E(t,e,r,n){var a=new M(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function A(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function S(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function L(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r*o-a*n;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-a*i,t[3]=r*i,t):null}function P(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function _(t){return t[0]*t[3]-t[2]*t[1]}function R(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=r[0],c=r[1],u=r[2],h=r[3];return t[0]=n*s+o*c,t[1]=a*s+i*c,t[2]=n*u+o*h,t[3]=a*u+i*h,t}function U(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=Math.sin(r),c=Math.cos(r);return t[0]=n*c+o*s,t[1]=a*c+i*s,t[2]=n*-s+o*c,t[3]=a*-s+i*c,t}function C(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=r[0],c=r[1];return t[0]=n*s,t[1]=a*s,t[2]=o*c,t[3]=i*c,t}function V(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function D(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function I(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function F(t){return Math.hypot(t[0],t[1],t[2],t[3])}function O(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function j(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function B(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function q(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],i=e[0],s=e[1],c=e[2],u=e[3];return Math.abs(r-i)<=f*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=f*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-c)<=f*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-u)<=f*Math.max(1,Math.abs(o),Math.abs(u))}function z(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function W(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var k=R,G=B;function X(){var t=new M(6);return M!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Y(t){var e=new M(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function H(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Z(t,e,r,n,a,o){var i=new M(6);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i[4]=a,i[5]=o,i}function Q(t,e,r,n,a,o,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t}function $(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=r*o-n*a;return c?(c=1/c,t[0]=o*c,t[1]=-n*c,t[2]=-a*c,t[3]=r*c,t[4]=(a*s-o*i)*c,t[5]=(n*i-r*s)*c,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=r[0],h=r[1],l=r[2],d=r[3],f=r[4],M=r[5];return t[0]=n*u+o*h,t[1]=a*u+i*h,t[2]=n*l+o*d,t[3]=a*l+i*d,t[4]=n*f+o*M+s,t[5]=a*f+i*M+c,t}function et(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=Math.sin(r),h=Math.cos(r);return t[0]=n*h+o*u,t[1]=a*h+i*u,t[2]=n*-u+o*h,t[3]=a*-u+i*h,t[4]=s,t[5]=c,t}function rt(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=r[0],h=r[1];return t[0]=n*u,t[1]=a*u,t[2]=o*h,t[3]=i*h,t[4]=s,t[5]=c,t}function nt(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=r[0],h=r[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=n*u+o*h+s,t[5]=a*u+i*h+c,t}function at(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function it(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ct(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ut(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function ht(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function lt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function dt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function ft(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Mt(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],c=e[0],u=e[1],h=e[2],l=e[3],d=e[4],M=e[5];return Math.abs(r-c)<=f*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-u)<=f*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-h)<=f*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-l)<=f*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-d)<=f*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-M)<=f*Math.max(1,Math.abs(s),Math.abs(M))}var xt=tt,mt=ht;function pt(){var t=new M(9);return M!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function vt(t){var e=new M(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function gt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wt(t,e,r,n,a,o,i,s,c){var u=new M(9);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=a,u[5]=o,u[6]=i,u[7]=s,u[8]=c,u}function yt(t,e,r,n,a,o,i,s,c,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=s,t[7]=c,t[8]=u,t}function Tt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Et(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function At(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],h=e[8],l=h*i-s*u,d=-h*o+s*c,f=u*o-i*c,M=r*l+n*d+a*f;return M?(M=1/M,t[0]=l*M,t[1]=(-h*n+a*u)*M,t[2]=(s*n-a*i)*M,t[3]=d*M,t[4]=(h*r-a*c)*M,t[5]=(-s*r+a*o)*M,t[6]=f*M,t[7]=(-u*r+n*c)*M,t[8]=(i*r-n*o)*M,t):null}function St(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],h=e[8];return t[0]=i*h-s*u,t[1]=a*u-n*h,t[2]=n*s-a*i,t[3]=s*c-o*h,t[4]=r*h-a*c,t[5]=a*o-r*s,t[6]=o*u-i*c,t[7]=n*c-r*u,t[8]=r*i-n*o,t}function Lt(t){var e=t[0],r=t[1],n=t[2],a=t[3],o=t[4],i=t[5],s=t[6],c=t[7],u=t[8];return e*(u*o-i*c)+r*(-u*a+i*s)+n*(c*a-o*s)}function Pt(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=e[6],h=e[7],l=e[8],d=r[0],f=r[1],M=r[2],x=r[3],m=r[4],p=r[5],b=r[6],v=r[7],g=r[8];return t[0]=d*n+f*i+M*u,t[1]=d*a+f*s+M*h,t[2]=d*o+f*c+M*l,t[3]=x*n+m*i+p*u,t[4]=x*a+m*s+p*h,t[5]=x*o+m*c+p*l,t[6]=b*n+v*i+g*u,t[7]=b*a+v*s+g*h,t[8]=b*o+v*c+g*l,t}function _t(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=e[6],h=e[7],l=e[8],d=r[0],f=r[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=s,t[5]=c,t[6]=d*n+f*i+u,t[7]=d*a+f*s+h,t[8]=d*o+f*c+l,t}function Rt(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=e[6],h=e[7],l=e[8],d=Math.sin(r),f=Math.cos(r);return t[0]=f*n+d*i,t[1]=f*a+d*s,t[2]=f*o+d*c,t[3]=f*i-d*n,t[4]=f*s-d*a,t[5]=f*c-d*o,t[6]=u,t[7]=h,t[8]=l,t}function Ut(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ct(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Vt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Dt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function It(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Ft(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r+r,s=n+n,c=a+a,u=r*i,h=n*i,l=n*s,d=a*i,f=a*s,M=a*c,x=o*i,m=o*s,p=o*c;return t[0]=1-l-M,t[3]=h-p,t[6]=d+m,t[1]=h+p,t[4]=1-u-M,t[7]=f-x,t[2]=d-m,t[5]=f+x,t[8]=1-u-l,t}function Ot(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],h=e[8],l=e[9],d=e[10],f=e[11],M=e[12],x=e[13],m=e[14],p=e[15],b=r*s-n*i,v=r*c-a*i,g=r*u-o*i,w=n*c-a*s,y=n*u-o*s,T=a*u-o*c,E=h*x-l*M,A=h*m-d*M,S=h*p-f*M,L=l*m-d*x,P=l*p-f*x,_=d*p-f*m,R=b*_-v*P+g*L+w*S-y*A+T*E;return R?(R=1/R,t[0]=(s*_-c*P+u*L)*R,t[1]=(c*S-i*_-u*A)*R,t[2]=(i*P-s*S+u*E)*R,t[3]=(a*P-n*_-o*L)*R,t[4]=(r*_-a*S+o*A)*R,t[5]=(n*S-r*P-o*E)*R,t[6]=(x*T-m*y+p*w)*R,t[7]=(m*g-M*T-p*v)*R,t[8]=(M*y-x*g+p*b)*R,t):null}function jt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Bt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Nt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function qt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function zt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function Wt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function kt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function Gt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Xt(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],c=t[6],u=t[7],h=t[8],l=e[0],d=e[1],M=e[2],x=e[3],m=e[4],p=e[5],b=e[6],v=e[7],g=e[8];return Math.abs(r-l)<=f*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=f*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-M)<=f*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-x)<=f*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(i-m)<=f*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-p)<=f*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(c-b)<=f*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(u-v)<=f*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(h-g)<=f*Math.max(1,Math.abs(h),Math.abs(g))}var Yt=Pt,Ht=zt;function Kt(){var t=new M(16);return M!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Zt(t){var e=new M(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $t(t,e,r,n,a,o,i,s,c,u,h,l,d,f,x,m){var p=new M(16);return p[0]=t,p[1]=e,p[2]=r,p[3]=n,p[4]=a,p[5]=o,p[6]=i,p[7]=s,p[8]=c,p[9]=u,p[10]=h,p[11]=l,p[12]=d,p[13]=f,p[14]=x,p[15]=m,p}function Jt(t,e,r,n,a,o,i,s,c,u,h,l,d,f,M,x,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=s,t[7]=c,t[8]=u,t[9]=h,t[10]=l,t[11]=d,t[12]=f,t[13]=M,t[14]=x,t[15]=m,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],o=e[6],i=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],h=e[8],l=e[9],d=e[10],f=e[11],M=e[12],x=e[13],m=e[14],p=e[15],b=r*s-n*i,v=r*c-a*i,g=r*u-o*i,w=n*c-a*s,y=n*u-o*s,T=a*u-o*c,E=h*x-l*M,A=h*m-d*M,S=h*p-f*M,L=l*m-d*x,P=l*p-f*x,_=d*p-f*m,R=b*_-v*P+g*L+w*S-y*A+T*E;return R?(R=1/R,t[0]=(s*_-c*P+u*L)*R,t[1]=(a*P-n*_-o*L)*R,t[2]=(x*T-m*y+p*w)*R,t[3]=(d*y-l*T-f*w)*R,t[4]=(c*S-i*_-u*A)*R,t[5]=(r*_-a*S+o*A)*R,t[6]=(m*g-M*T-p*v)*R,t[7]=(h*T-d*g+f*v)*R,t[8]=(i*P-s*S+u*E)*R,t[9]=(n*S-r*P-o*E)*R,t[10]=(M*y-x*g+p*b)*R,t[11]=(l*g-h*y-f*b)*R,t[12]=(s*A-i*L-c*E)*R,t[13]=(r*L-n*A+a*E)*R,t[14]=(x*v-M*w-m*b)*R,t[15]=(h*w-l*v+d*b)*R,t):null}function ne(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],h=e[8],l=e[9],d=e[10],f=e[11],M=e[12],x=e[13],m=e[14],p=e[15];return t[0]=s*(d*p-f*m)-l*(c*p-u*m)+x*(c*f-u*d),t[1]=-(n*(d*p-f*m)-l*(a*p-o*m)+x*(a*f-o*d)),t[2]=n*(c*p-u*m)-s*(a*p-o*m)+x*(a*u-o*c),t[3]=-(n*(c*f-u*d)-s*(a*f-o*d)+l*(a*u-o*c)),t[4]=-(i*(d*p-f*m)-h*(c*p-u*m)+M*(c*f-u*d)),t[5]=r*(d*p-f*m)-h*(a*p-o*m)+M*(a*f-o*d),t[6]=-(r*(c*p-u*m)-i*(a*p-o*m)+M*(a*u-o*c)),t[7]=r*(c*f-u*d)-i*(a*f-o*d)+h*(a*u-o*c),t[8]=i*(l*p-f*x)-h*(s*p-u*x)+M*(s*f-u*l),t[9]=-(r*(l*p-f*x)-h*(n*p-o*x)+M*(n*f-o*l)),t[10]=r*(s*p-u*x)-i*(n*p-o*x)+M*(n*u-o*s),t[11]=-(r*(s*f-u*l)-i*(n*f-o*l)+h*(n*u-o*s)),t[12]=-(i*(l*m-d*x)-h*(s*m-c*x)+M*(s*d-c*l)),t[13]=r*(l*m-d*x)-h*(n*m-a*x)+M*(n*d-a*l),t[14]=-(r*(s*m-c*x)-i*(n*m-a*x)+M*(n*c-a*s)),t[15]=r*(s*d-c*l)-i*(n*d-a*l)+h*(n*c-a*s),t}function ae(t){var e=t[0],r=t[1],n=t[2],a=t[3],o=t[4],i=t[5],s=t[6],c=t[7],u=t[8],h=t[9],l=t[10],d=t[11],f=t[12],M=t[13],x=t[14],m=t[15];return(e*i-r*o)*(l*m-d*x)-(e*s-n*o)*(h*m-d*M)+(e*c-a*o)*(h*x-l*M)+(r*s-n*i)*(u*m-d*f)-(r*c-a*i)*(u*x-l*f)+(n*c-a*s)*(u*M-h*f)}function oe(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=e[6],h=e[7],l=e[8],d=e[9],f=e[10],M=e[11],x=e[12],m=e[13],p=e[14],b=e[15],v=r[0],g=r[1],w=r[2],y=r[3];return t[0]=v*n+g*s+w*l+y*x,t[1]=v*a+g*c+w*d+y*m,t[2]=v*o+g*u+w*f+y*p,t[3]=v*i+g*h+w*M+y*b,v=r[4],g=r[5],w=r[6],y=r[7],t[4]=v*n+g*s+w*l+y*x,t[5]=v*a+g*c+w*d+y*m,t[6]=v*o+g*u+w*f+y*p,t[7]=v*i+g*h+w*M+y*b,v=r[8],g=r[9],w=r[10],y=r[11],t[8]=v*n+g*s+w*l+y*x,t[9]=v*a+g*c+w*d+y*m,t[10]=v*o+g*u+w*f+y*p,t[11]=v*i+g*h+w*M+y*b,v=r[12],g=r[13],w=r[14],y=r[15],t[12]=v*n+g*s+w*l+y*x,t[13]=v*a+g*c+w*d+y*m,t[14]=v*o+g*u+w*f+y*p,t[15]=v*i+g*h+w*M+y*b,t}function ie(t,e,r){var n,a,o,i,s,c,u,h,l,d,f,M,x=r[0],m=r[1],p=r[2];return e===t?(t[12]=e[0]*x+e[4]*m+e[8]*p+e[12],t[13]=e[1]*x+e[5]*m+e[9]*p+e[13],t[14]=e[2]*x+e[6]*m+e[10]*p+e[14],t[15]=e[3]*x+e[7]*m+e[11]*p+e[15]):(n=e[0],a=e[1],o=e[2],i=e[3],s=e[4],c=e[5],u=e[6],h=e[7],l=e[8],d=e[9],f=e[10],M=e[11],t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=s,t[5]=c,t[6]=u,t[7]=h,t[8]=l,t[9]=d,t[10]=f,t[11]=M,t[12]=n*x+s*m+l*p+e[12],t[13]=a*x+c*m+d*p+e[13],t[14]=o*x+u*m+f*p+e[14],t[15]=i*x+h*m+M*p+e[15]),t}function se(t,e,r){var n=r[0],a=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ce(t,e,r,n){var a,o,i,s,c,u,h,l,d,M,x,m,p,b,v,g,w,y,T,E,A,S,L,P,_=n[0],R=n[1],U=n[2],C=Math.hypot(_,R,U);return C<f?null:(_*=C=1/C,R*=C,U*=C,a=Math.sin(r),i=1-(o=Math.cos(r)),s=e[0],c=e[1],u=e[2],h=e[3],l=e[4],d=e[5],M=e[6],x=e[7],m=e[8],p=e[9],b=e[10],v=e[11],g=_*_*i+o,w=R*_*i+U*a,y=U*_*i-R*a,T=_*R*i-U*a,E=R*R*i+o,A=U*R*i+_*a,S=_*U*i+R*a,L=R*U*i-_*a,P=U*U*i+o,t[0]=s*g+l*w+m*y,t[1]=c*g+d*w+p*y,t[2]=u*g+M*w+b*y,t[3]=h*g+x*w+v*y,t[4]=s*T+l*E+m*A,t[5]=c*T+d*E+p*A,t[6]=u*T+M*E+b*A,t[7]=h*T+x*E+v*A,t[8]=s*S+l*L+m*P,t[9]=c*S+d*L+p*P,t[10]=u*S+M*L+b*P,t[11]=h*S+x*L+v*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ue(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[4],i=e[5],s=e[6],c=e[7],u=e[8],h=e[9],l=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+u*n,t[5]=i*a+h*n,t[6]=s*a+l*n,t[7]=c*a+d*n,t[8]=u*a-o*n,t[9]=h*a-i*n,t[10]=l*a-s*n,t[11]=d*a-c*n,t}function he(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],s=e[2],c=e[3],u=e[8],h=e[9],l=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-u*n,t[1]=i*a-h*n,t[2]=s*a-l*n,t[3]=c*a-d*n,t[8]=o*n+u*a,t[9]=i*n+h*a,t[10]=s*n+l*a,t[11]=c*n+d*a,t}function le(t,e,r){var n=Math.sin(r),a=Math.cos(r),o=e[0],i=e[1],s=e[2],c=e[3],u=e[4],h=e[5],l=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+u*n,t[1]=i*a+h*n,t[2]=s*a+l*n,t[3]=c*a+d*n,t[4]=u*a-o*n,t[5]=h*a-i*n,t[6]=l*a-s*n,t[7]=d*a-c*n,t}function de(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function fe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Me(t,e,r){var n,a,o,i=r[0],s=r[1],c=r[2],u=Math.hypot(i,s,c);return u<f?null:(i*=u=1/u,s*=u,c*=u,n=Math.sin(e),o=1-(a=Math.cos(e)),t[0]=i*i*o+a,t[1]=s*i*o+c*n,t[2]=c*i*o-s*n,t[3]=0,t[4]=i*s*o-c*n,t[5]=s*s*o+a,t[6]=c*s*o+i*n,t[7]=0,t[8]=i*c*o+s*n,t[9]=s*c*o-i*n,t[10]=c*c*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function xe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function be(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=n+n,c=a+a,u=o+o,h=n*s,l=n*c,d=n*u,f=a*c,M=a*u,x=o*u,m=i*s,p=i*c,b=i*u;return t[0]=1-(f+x),t[1]=l+b,t[2]=d-p,t[3]=0,t[4]=l-b,t[5]=1-(h+x),t[6]=M+m,t[7]=0,t[8]=d+p,t[9]=M-m,t[10]=1-(h+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ve(t,e){var r=new M(3),n=-e[0],a=-e[1],o=-e[2],i=e[3],s=e[4],c=e[5],u=e[6],h=e[7],l=n*n+a*a+o*o+i*i;return l>0?(r[0]=2*(s*i+h*n+c*o-u*a)/l,r[1]=2*(c*i+h*a+u*n-s*o)/l,r[2]=2*(u*i+h*o+s*a-c*n)/l):(r[0]=2*(s*i+h*n+c*o-u*a),r[1]=2*(c*i+h*a+u*n-s*o),r[2]=2*(u*i+h*o+s*a-c*n)),be(t,e,r),t}function ge(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function we(t,e){var r=e[0],n=e[1],a=e[2],o=e[4],i=e[5],s=e[6],c=e[8],u=e[9],h=e[10];return t[0]=Math.hypot(r,n,a),t[1]=Math.hypot(o,i,s),t[2]=Math.hypot(c,u,h),t}function ye(t,e){var r=new M(3);we(r,e);var n=1/r[0],a=1/r[1],o=1/r[2],i=e[0]*n,s=e[1]*a,c=e[2]*o,u=e[4]*n,h=e[5]*a,l=e[6]*o,d=e[8]*n,f=e[9]*a,x=e[10]*o,m=i+h+x,p=0;return m>0?(p=2*Math.sqrt(m+1),t[3]=.25*p,t[0]=(l-f)/p,t[1]=(d-c)/p,t[2]=(s-u)/p):i>h&&i>x?(p=2*Math.sqrt(1+i-h-x),t[3]=(l-f)/p,t[0]=.25*p,t[1]=(s+u)/p,t[2]=(d+c)/p):h>x?(p=2*Math.sqrt(1+h-i-x),t[3]=(d-c)/p,t[0]=(s+u)/p,t[1]=.25*p,t[2]=(l+f)/p):(p=2*Math.sqrt(1+x-i-h),t[3]=(s-u)/p,t[0]=(d+c)/p,t[1]=(l+f)/p,t[2]=.25*p),t}function Te(t,e,r,n){var a=e[0],o=e[1],i=e[2],s=e[3],c=a+a,u=o+o,h=i+i,l=a*c,d=a*u,f=a*h,M=o*u,x=o*h,m=i*h,p=s*c,b=s*u,v=s*h,g=n[0],w=n[1],y=n[2];return t[0]=(1-(M+m))*g,t[1]=(d+v)*g,t[2]=(f-b)*g,t[3]=0,t[4]=(d-v)*w,t[5]=(1-(l+m))*w,t[6]=(x+p)*w,t[7]=0,t[8]=(f+b)*y,t[9]=(x-p)*y,t[10]=(1-(l+M))*y,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Ee(t,e,r,n,a){var o=e[0],i=e[1],s=e[2],c=e[3],u=o+o,h=i+i,l=s+s,d=o*u,f=o*h,M=o*l,x=i*h,m=i*l,p=s*l,b=c*u,v=c*h,g=c*l,w=n[0],y=n[1],T=n[2],E=a[0],A=a[1],S=a[2],L=(1-(x+p))*w,P=(f+g)*w,_=(M-v)*w,R=(f-g)*y,U=(1-(d+p))*y,C=(m+b)*y,V=(M+v)*T,D=(m-b)*T,I=(1-(d+x))*T;return t[0]=L,t[1]=P,t[2]=_,t[3]=0,t[4]=R,t[5]=U,t[6]=C,t[7]=0,t[8]=V,t[9]=D,t[10]=I,t[11]=0,t[12]=r[0]+E-(L*E+R*A+V*S),t[13]=r[1]+A-(P*E+U*A+D*S),t[14]=r[2]+S-(_*E+C*A+I*S),t[15]=1,t}function Ae(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r+r,s=n+n,c=a+a,u=r*i,h=n*i,l=n*s,d=a*i,f=a*s,M=a*c,x=o*i,m=o*s,p=o*c;return t[0]=1-l-M,t[1]=h+p,t[2]=d-m,t[3]=0,t[4]=h-p,t[5]=1-u-M,t[6]=f+x,t[7]=0,t[8]=d+m,t[9]=f-x,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Se(t,e,r,n,a,o,i){var s=1/(r-e),c=1/(a-n),u=1/(o-i);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*c,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(a+n)*c,t[10]=(i+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*u,t[15]=0,t}function Le(t,e,r,n,a){var o,i=1/Math.tan(e/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(n-a),t[10]=(a+n)*o,t[14]=2*a*n*o):(t[10]=-1,t[14]=-2*n),t}var Pe=Le;function _e(t,e,r,n,a){var o,i=1/Math.tan(e/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(n-a),t[10]=a*o,t[14]=a*n*o):(t[10]=-1,t[14]=-n),t}function Re(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),c=2/(i+s),u=2/(a+o);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(i-s)*c*.5,t[9]=(a-o)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Ue(t,e,r,n,a,o,i){var s=1/(e-r),c=1/(n-a),u=1/(o-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+r)*s,t[13]=(a+n)*c,t[14]=(i+o)*u,t[15]=1,t}var Ce=Ue;function Ve(t,e,r,n,a,o,i){var s=1/(e-r),c=1/(n-a),u=1/(o-i);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=u,t[11]=0,t[12]=(e+r)*s,t[13]=(a+n)*c,t[14]=o*u,t[15]=1,t}function De(t,e,r,n){var a,o,i,s,c,u,h,l,d,M,x=e[0],m=e[1],p=e[2],b=n[0],v=n[1],g=n[2],w=r[0],y=r[1],T=r[2];return Math.abs(x-w)<f&&Math.abs(m-y)<f&&Math.abs(p-T)<f?te(t):(h=x-w,l=m-y,d=p-T,a=v*(d*=M=1/Math.hypot(h,l,d))-g*(l*=M),o=g*(h*=M)-b*d,i=b*l-v*h,(M=Math.hypot(a,o,i))?(a*=M=1/M,o*=M,i*=M):(a=0,o=0,i=0),s=l*i-d*o,c=d*a-h*i,u=h*o-l*a,(M=Math.hypot(s,c,u))?(s*=M=1/M,c*=M,u*=M):(s=0,c=0,u=0),t[0]=a,t[1]=s,t[2]=h,t[3]=0,t[4]=o,t[5]=c,t[6]=l,t[7]=0,t[8]=i,t[9]=u,t[10]=d,t[11]=0,t[12]=-(a*x+o*m+i*p),t[13]=-(s*x+c*m+u*p),t[14]=-(h*x+l*m+d*p),t[15]=1,t)}function Ie(t,e,r,n){var a=e[0],o=e[1],i=e[2],s=n[0],c=n[1],u=n[2],h=a-r[0],l=o-r[1],d=i-r[2],f=h*h+l*l+d*d;f>0&&(h*=f=1/Math.sqrt(f),l*=f,d*=f);var M=c*d-u*l,x=u*h-s*d,m=s*l-c*h;return(f=M*M+x*x+m*m)>0&&(M*=f=1/Math.sqrt(f),x*=f,m*=f),t[0]=M,t[1]=x,t[2]=m,t[3]=0,t[4]=l*m-d*x,t[5]=d*M-h*m,t[6]=h*x-l*M,t[7]=0,t[8]=h,t[9]=l,t[10]=d,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t}function Fe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Oe(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function je(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Be(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Ne(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function qe(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function ze(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function We(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],c=t[6],u=t[7],h=t[8],l=t[9],d=t[10],M=t[11],x=t[12],m=t[13],p=t[14],b=t[15],v=e[0],g=e[1],w=e[2],y=e[3],T=e[4],E=e[5],A=e[6],S=e[7],L=e[8],P=e[9],_=e[10],R=e[11],U=e[12],C=e[13],V=e[14],D=e[15];return Math.abs(r-v)<=f*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-g)<=f*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(a-w)<=f*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(o-y)<=f*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(i-T)<=f*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-E)<=f*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(c-A)<=f*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(u-S)<=f*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(h-L)<=f*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(l-P)<=f*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(d-_)<=f*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(M-R)<=f*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs(x-U)<=f*Math.max(1,Math.abs(x),Math.abs(U))&&Math.abs(m-C)<=f*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(p-V)<=f*Math.max(1,Math.abs(p),Math.abs(V))&&Math.abs(b-D)<=f*Math.max(1,Math.abs(b),Math.abs(D))}var ke=oe,Ge=Be;function Xe(){var t=new M(3);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ye(t){var e=new M(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function He(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function Ke(t,e,r){var n=new M(3);return n[0]=t,n[1]=e,n[2]=r,n}function Ze(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Qe(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function $e(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Je(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function tr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function er(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function rr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function nr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ar(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function or(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function ir(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function sr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function cr(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function ur(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.hypot(r,n,a)}function hr(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a}function lr(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function dr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function fr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Mr(t,e){var r=e[0],n=e[1],a=e[2],o=r*r+n*n+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function xr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function mr(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[0],s=r[1],c=r[2];return t[0]=a*c-o*s,t[1]=o*i-n*c,t[2]=n*s-a*i,t}function pr(t,e,r,n){var a=e[0],o=e[1],i=e[2];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t}function br(t,e,r,n,a,o){var i=o*o,s=i*(2*o-3)+1,c=i*(o-2)+o,u=i*(o-1),h=i*(3-2*o);return t[0]=e[0]*s+r[0]*c+n[0]*u+a[0]*h,t[1]=e[1]*s+r[1]*c+n[1]*u+a[1]*h,t[2]=e[2]*s+r[2]*c+n[2]*u+a[2]*h,t}function vr(t,e,r,n,a,o){var i=1-o,s=i*i,c=o*o,u=s*i,h=3*o*s,l=3*c*i,d=c*o;return t[0]=e[0]*u+r[0]*h+n[0]*l+a[0]*d,t[1]=e[1]*u+r[1]*h+n[1]*l+a[1]*d,t[2]=e[2]*u+r[2]*h+n[2]*l+a[2]*d,t}function gr(t,e){e=e||1;var r=2*x()*Math.PI,n=2*x()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t}function wr(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[3]*n+r[7]*a+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*a+r[8]*o+r[12])/i,t[1]=(r[1]*n+r[5]*a+r[9]*o+r[13])/i,t[2]=(r[2]*n+r[6]*a+r[10]*o+r[14])/i,t}function yr(t,e,r){var n=e[0],a=e[1],o=e[2];return t[0]=n*r[0]+a*r[3]+o*r[6],t[1]=n*r[1]+a*r[4]+o*r[7],t[2]=n*r[2]+a*r[5]+o*r[8],t}function Tr(t,e,r){var n=r[0],a=r[1],o=r[2],i=r[3],s=e[0],c=e[1],u=e[2],h=a*u-o*c,l=o*s-n*u,d=n*c-a*s,f=a*d-o*l,M=o*h-n*d,x=n*l-a*h,m=2*i;return h*=m,l*=m,d*=m,f*=2,M*=2,x*=2,t[0]=s+h+f,t[1]=c+l+M,t[2]=u+d+x,t}function Er(t,e,r,n){var a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Ar(t,e,r,n){var a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Sr(t,e,r,n){var a=[],o=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function Lr(t,e){var r=t[0],n=t[1],a=t[2],o=e[0],i=e[1],s=e[2],c=Math.sqrt(r*r+n*n+a*a)*Math.sqrt(o*o+i*i+s*s),u=c&&xr(t,e)/c;return Math.acos(Math.min(Math.max(u,-1),1))}function Pr(t){return t[0]=0,t[1]=0,t[2]=0,t}function _r(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Rr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Ur(t,e){var r=t[0],n=t[1],a=t[2],o=e[0],i=e[1],s=e[2];return Math.abs(r-o)<=f*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-i)<=f*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-s)<=f*Math.max(1,Math.abs(a),Math.abs(s))}var Cr,Vr=Je,Dr=tr,Ir=er,Fr=ur,Or=hr,jr=He,Br=lr,Nr=(Cr=Xe(),function(t,e,r,n,a,o){var i,s;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,i=r;i<s;i+=e)Cr[0]=t[i],Cr[1]=t[i+1],Cr[2]=t[i+2],a(Cr,Cr,o),t[i]=Cr[0],t[i+1]=Cr[1],t[i+2]=Cr[2];return t});function qr(){var t=new M(4);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function zr(t){var e=new M(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Wr(t,e,r,n){var a=new M(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a}function kr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Gr(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t}function Xr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Yr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Hr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function Kr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Zr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Qr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function $r(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Jr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function tn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function en(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function rn(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function nn(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.hypot(r,n,a,o)}function an(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+a*a+o*o}function on(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.hypot(e,r,n,a)}function sn(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a}function cn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function un(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function hn(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r*r+n*n+a*a+o*o;return i>0&&(i=1/Math.sqrt(i)),t[0]=r*i,t[1]=n*i,t[2]=a*i,t[3]=o*i,t}function ln(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function dn(t,e,r,n){var a=r[0]*n[1]-r[1]*n[0],o=r[0]*n[2]-r[2]*n[0],i=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],c=r[1]*n[3]-r[3]*n[1],u=r[2]*n[3]-r[3]*n[2],h=e[0],l=e[1],d=e[2],f=e[3];return t[0]=l*u-d*c+f*s,t[1]=-h*u+d*i-f*o,t[2]=h*c-l*i+f*a,t[3]=-h*s+l*o-d*a,t}function fn(t,e,r,n){var a=e[0],o=e[1],i=e[2],s=e[3];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t[3]=s+n*(r[3]-s),t}function Mn(t,e){var r,n,a,o,i,s;e=e||1;do{i=(r=2*x()-1)*r+(n=2*x()-1)*n}while(i>=1);do{s=(a=2*x()-1)*a+(o=2*x()-1)*o}while(s>=1);var c=Math.sqrt((1-i)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*a*c,t[3]=e*o*c,t}function xn(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*o+r[12]*i,t[1]=r[1]*n+r[5]*a+r[9]*o+r[13]*i,t[2]=r[2]*n+r[6]*a+r[10]*o+r[14]*i,t[3]=r[3]*n+r[7]*a+r[11]*o+r[15]*i,t}function mn(t,e,r){var n=e[0],a=e[1],o=e[2],i=r[0],s=r[1],c=r[2],u=r[3],h=u*n+s*o-c*a,l=u*a+c*n-i*o,d=u*o+i*a-s*n,f=-i*n-s*a-c*o;return t[0]=h*u+f*-i+l*-c-d*-s,t[1]=l*u+f*-s+d*-i-h*-c,t[2]=d*u+f*-c+h*-s-l*-i,t[3]=e[3],t}function pn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function bn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function vn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function gn(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],i=e[0],s=e[1],c=e[2],u=e[3];return Math.abs(r-i)<=f*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=f*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-c)<=f*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(o-u)<=f*Math.max(1,Math.abs(o),Math.abs(u))}var wn=Yr,yn=Hr,Tn=Kr,En=nn,An=an,Sn=on,Ln=sn,Pn=function(){var t=qr();return function(e,r,n,a,o,i){var s,c;for(r||(r=4),n||(n=0),c=a?Math.min(a*r+n,e.length):e.length,s=n;s<c;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,i),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function _n(){var t=new M(4);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Rn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Un(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Cn(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>f?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Vn(t,e){var r=ca(t,e);return Math.acos(2*r*r-1)}function Dn(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=r[0],c=r[1],u=r[2],h=r[3];return t[0]=n*h+i*s+a*u-o*c,t[1]=a*h+i*c+o*s-n*u,t[2]=o*h+i*u+n*c-a*s,t[3]=i*h-n*s-a*c-o*u,t}function In(t,e,r){r*=.5;var n=e[0],a=e[1],o=e[2],i=e[3],s=Math.sin(r),c=Math.cos(r);return t[0]=n*c+i*s,t[1]=a*c+o*s,t[2]=o*c-a*s,t[3]=i*c-n*s,t}function Fn(t,e,r){r*=.5;var n=e[0],a=e[1],o=e[2],i=e[3],s=Math.sin(r),c=Math.cos(r);return t[0]=n*c-o*s,t[1]=a*c+i*s,t[2]=o*c+n*s,t[3]=i*c-a*s,t}function On(t,e,r){r*=.5;var n=e[0],a=e[1],o=e[2],i=e[3],s=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*s,t[1]=a*c-n*s,t[2]=o*c+i*s,t[3]=i*c-o*s,t}function jn(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t}function Bn(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=Math.sqrt(r*r+n*n+a*a),s=Math.exp(o),c=i>0?s*Math.sin(i)/i:0;return t[0]=r*c,t[1]=n*c,t[2]=a*c,t[3]=s*Math.cos(i),t}function Nn(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=Math.sqrt(r*r+n*n+a*a),s=i>0?Math.atan2(i,o)/i:0;return t[0]=r*s,t[1]=n*s,t[2]=a*s,t[3]=.5*Math.log(r*r+n*n+a*a+o*o),t}function qn(t,e,r){return Nn(t,e),sa(t,t,r),Bn(t,t),t}function zn(t,e,r,n){var a,o,i,s,c,u=e[0],h=e[1],l=e[2],d=e[3],M=r[0],x=r[1],m=r[2],p=r[3];return(o=u*M+h*x+l*m+d*p)<0&&(o=-o,M=-M,x=-x,m=-m,p=-p),1-o>f?(a=Math.acos(o),i=Math.sin(a),s=Math.sin((1-n)*a)/i,c=Math.sin(n*a)/i):(s=1-n,c=n),t[0]=s*u+c*M,t[1]=s*h+c*x,t[2]=s*l+c*m,t[3]=s*d+c*p,t}function Wn(t){var e=x(),r=x(),n=x(),a=Math.sqrt(1-e),o=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*r),t[1]=a*Math.cos(2*Math.PI*r),t[2]=o*Math.sin(2*Math.PI*n),t[3]=o*Math.cos(2*Math.PI*n),t}function kn(t,e){var r=e[0],n=e[1],a=e[2],o=e[3],i=r*r+n*n+a*a+o*o,s=i?1/i:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-a*s,t[3]=o*s,t}function Gn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Xn(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+a]+e[3*a+o])*r,t[i]=(e[3*i+a]+e[3*a+i])*r}return t}function Yn(t,e,r,n){var a=.5*Math.PI/180;e*=a,r*=a,n*=a;var o=Math.sin(e),i=Math.cos(e),s=Math.sin(r),c=Math.cos(r),u=Math.sin(n),h=Math.cos(n);return t[0]=o*c*h-i*s*u,t[1]=i*s*h+o*c*u,t[2]=i*c*u-o*s*h,t[3]=i*c*h+o*s*u,t}function Hn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Kn,Zn,Qn,$n,Jn,ta,ea=zr,ra=Wr,na=kr,aa=Gr,oa=Xr,ia=Dn,sa=en,ca=ln,ua=fn,ha=on,la=ha,da=sn,fa=da,Ma=hn,xa=vn,ma=gn,pa=(Kn=Xe(),Zn=Ke(1,0,0),Qn=Ke(0,1,0),function(t,e,r){var n=xr(e,r);return n<-.999999?(mr(Kn,Zn,e),jr(Kn)<1e-6&&mr(Kn,Qn,e),Mr(Kn,Kn),Un(t,Kn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(mr(Kn,e,r),t[0]=Kn[0],t[1]=Kn[1],t[2]=Kn[2],t[3]=1+n,Ma(t,t))}),ba=($n=_n(),Jn=_n(),function(t,e,r,n,a,o){return zn($n,e,a,o),zn(Jn,r,n,o),zn(t,$n,Jn,2*o*(1-o)),t}),va=(ta=pt(),function(t,e,r,n){return ta[0]=r[0],ta[3]=r[1],ta[6]=r[2],ta[1]=n[0],ta[4]=n[1],ta[7]=n[2],ta[2]=-e[0],ta[5]=-e[1],ta[8]=-e[2],Ma(t,Xn(t,ta))});function ga(){var t=new M(8);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function wa(t){var e=new M(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function ya(t,e,r,n,a,o,i,s){var c=new M(8);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=a,c[5]=o,c[6]=i,c[7]=s,c}function Ta(t,e,r,n,a,o,i){var s=new M(8);s[0]=t,s[1]=e,s[2]=r,s[3]=n;var c=.5*a,u=.5*o,h=.5*i;return s[4]=c*n+u*r-h*e,s[5]=u*n+h*t-c*r,s[6]=h*n+c*e-u*t,s[7]=-c*t-u*e-h*r,s}function Ea(t,e,r){var n=.5*r[0],a=.5*r[1],o=.5*r[2],i=e[0],s=e[1],c=e[2],u=e[3];return t[0]=i,t[1]=s,t[2]=c,t[3]=u,t[4]=n*u+a*c-o*s,t[5]=a*u+o*i-n*c,t[6]=o*u+n*s-a*i,t[7]=-n*i-a*s-o*c,t}function Aa(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Sa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function La(t,e){var r=_n();ye(r,e);var n=new M(3);return ge(n,e),Ea(t,r,n),t}function Pa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function _a(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ra(t,e,r,n,a,o,i,s,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=s,t[7]=c,t}var Ua=na;function Ca(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Va=na;function Da(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Ia(t,e){var r=e[4],n=e[5],a=e[6],o=e[7],i=-e[0],s=-e[1],c=-e[2],u=e[3];return t[0]=2*(r*u+o*i+n*c-a*s),t[1]=2*(n*u+o*s+a*i-r*c),t[2]=2*(a*u+o*c+r*s-n*i),t}function Fa(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=.5*r[0],c=.5*r[1],u=.5*r[2],h=e[4],l=e[5],d=e[6],f=e[7];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=i*s+a*u-o*c+h,t[5]=i*c+o*s-n*u+l,t[6]=i*u+n*c-a*s+d,t[7]=-n*s-a*c-o*u+f,t}function Oa(t,e,r){var n=-e[0],a=-e[1],o=-e[2],i=e[3],s=e[4],c=e[5],u=e[6],h=e[7],l=s*i+h*n+c*o-u*a,d=c*i+h*a+u*n-s*o,f=u*i+h*o+s*a-c*n,M=h*i-s*n-c*a-u*o;return In(t,e,r),n=t[0],a=t[1],o=t[2],i=t[3],t[4]=l*i+M*n+d*o-f*a,t[5]=d*i+M*a+f*n-l*o,t[6]=f*i+M*o+l*a-d*n,t[7]=M*i-l*n-d*a-f*o,t}function ja(t,e,r){var n=-e[0],a=-e[1],o=-e[2],i=e[3],s=e[4],c=e[5],u=e[6],h=e[7],l=s*i+h*n+c*o-u*a,d=c*i+h*a+u*n-s*o,f=u*i+h*o+s*a-c*n,M=h*i-s*n-c*a-u*o;return Fn(t,e,r),n=t[0],a=t[1],o=t[2],i=t[3],t[4]=l*i+M*n+d*o-f*a,t[5]=d*i+M*a+f*n-l*o,t[6]=f*i+M*o+l*a-d*n,t[7]=M*i-l*n-d*a-f*o,t}function Ba(t,e,r){var n=-e[0],a=-e[1],o=-e[2],i=e[3],s=e[4],c=e[5],u=e[6],h=e[7],l=s*i+h*n+c*o-u*a,d=c*i+h*a+u*n-s*o,f=u*i+h*o+s*a-c*n,M=h*i-s*n-c*a-u*o;return On(t,e,r),n=t[0],a=t[1],o=t[2],i=t[3],t[4]=l*i+M*n+d*o-f*a,t[5]=d*i+M*a+f*n-l*o,t[6]=f*i+M*o+l*a-d*n,t[7]=M*i-l*n-d*a-f*o,t}function Na(t,e,r){var n=r[0],a=r[1],o=r[2],i=r[3],s=e[0],c=e[1],u=e[2],h=e[3];return t[0]=s*i+h*n+c*o-u*a,t[1]=c*i+h*a+u*n-s*o,t[2]=u*i+h*o+s*a-c*n,t[3]=h*i-s*n-c*a-u*o,s=e[4],c=e[5],u=e[6],h=e[7],t[4]=s*i+h*n+c*o-u*a,t[5]=c*i+h*a+u*n-s*o,t[6]=u*i+h*o+s*a-c*n,t[7]=h*i-s*n-c*a-u*o,t}function qa(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=r[0],c=r[1],u=r[2],h=r[3];return t[0]=n*h+i*s+a*u-o*c,t[1]=a*h+i*c+o*s-n*u,t[2]=o*h+i*u+n*c-a*s,t[3]=i*h-n*s-a*c-o*u,s=r[4],c=r[5],u=r[6],h=r[7],t[4]=n*h+i*s+a*u-o*c,t[5]=a*h+i*c+o*s-n*u,t[6]=o*h+i*u+n*c-a*s,t[7]=i*h-n*s-a*c-o*u,t}function za(t,e,r,n){if(Math.abs(n)<f)return Pa(t,e);var a=Math.hypot(r[0],r[1],r[2]);n*=.5;var o=Math.sin(n),i=o*r[0]/a,s=o*r[1]/a,c=o*r[2]/a,u=Math.cos(n),h=e[0],l=e[1],d=e[2],M=e[3];t[0]=h*u+M*i+l*c-d*s,t[1]=l*u+M*s+d*i-h*c,t[2]=d*u+M*c+h*s-l*i,t[3]=M*u-h*i-l*s-d*c;var x=e[4],m=e[5],p=e[6],b=e[7];return t[4]=x*u+b*i+m*c-p*s,t[5]=m*u+b*s+p*i-x*c,t[6]=p*u+b*c+x*s-m*i,t[7]=b*u-x*i-m*s-p*c,t}function Wa(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function ka(t,e,r){var n=e[0],a=e[1],o=e[2],i=e[3],s=r[4],c=r[5],u=r[6],h=r[7],l=e[4],d=e[5],f=e[6],M=e[7],x=r[0],m=r[1],p=r[2],b=r[3];return t[0]=n*b+i*x+a*p-o*m,t[1]=a*b+i*m+o*x-n*p,t[2]=o*b+i*p+n*m-a*x,t[3]=i*b-n*x-a*m-o*p,t[4]=n*h+i*s+a*u-o*c+l*b+M*x+d*p-f*m,t[5]=a*h+i*c+o*s-n*u+d*b+M*m+f*x-l*p,t[6]=o*h+i*u+n*c-a*s+f*b+M*p+l*m-d*x,t[7]=i*h-n*s-a*c-o*u+M*b-l*x-d*m-f*p,t}var Ga=ka;function Xa(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var Ya=ca;function Ha(t,e,r,n){var a=1-n;return Ya(e,r)<0&&(n=-n),t[0]=e[0]*a+r[0]*n,t[1]=e[1]*a+r[1]*n,t[2]=e[2]*a+r[2]*n,t[3]=e[3]*a+r[3]*n,t[4]=e[4]*a+r[4]*n,t[5]=e[5]*a+r[5]*n,t[6]=e[6]*a+r[6]*n,t[7]=e[7]*a+r[7]*n,t}function Ka(t,e){var r=Ja(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Za(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Qa=ha,$a=Qa,Ja=da,to=Ja;function eo(t,e){var r=Ja(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,a=e[1]/r,o=e[2]/r,i=e[3]/r,s=e[4],c=e[5],u=e[6],h=e[7],l=n*s+a*c+o*u+i*h;t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=(s-n*l)/r,t[5]=(c-a*l)/r,t[6]=(u-o*l)/r,t[7]=(h-i*l)/r}return t}function ro(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function no(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ao(t,e){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],s=t[5],c=t[6],u=t[7],h=e[0],l=e[1],d=e[2],M=e[3],x=e[4],m=e[5],p=e[6],b=e[7];return Math.abs(r-h)<=f*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-l)<=f*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-d)<=f*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-M)<=f*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(i-x)<=f*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-m)<=f*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-p)<=f*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(u-b)<=f*Math.max(1,Math.abs(u),Math.abs(b))}function oo(){var t=new M(2);return M!=Float32Array&&(t[0]=0,t[1]=0),t}function io(t){var e=new M(2);return e[0]=t[0],e[1]=t[1],e}function so(t,e){var r=new M(2);return r[0]=t,r[1]=e,r}function co(t,e){return t[0]=e[0],t[1]=e[1],t}function uo(t,e,r){return t[0]=e,t[1]=r,t}function ho(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function lo(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function fo(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function Mo(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function xo(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function mo(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function po(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function bo(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function vo(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function go(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function wo(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function yo(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function To(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function Eo(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function Ao(t){var e=t[0],r=t[1];return e*e+r*r}function So(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Lo(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Po(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t}function _o(t,e){return t[0]*e[0]+t[1]*e[1]}function Ro(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function Uo(t,e,r,n){var a=e[0],o=e[1];return t[0]=a+n*(r[0]-a),t[1]=o+n*(r[1]-o),t}function Co(t,e){e=e||1;var r=2*x()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function Vo(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t}function Do(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t}function Io(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t}function Fo(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t}function Oo(t,e,r,n){var a=e[0]-r[0],o=e[1]-r[1],i=Math.sin(n),s=Math.cos(n);return t[0]=a*s-o*i+r[0],t[1]=a*i+o*s+r[1],t}function jo(t,e){var r=t[0],n=t[1],a=e[0],o=e[1],i=Math.sqrt(r*r+n*n)*Math.sqrt(a*a+o*o),s=i&&(r*a+n*o)/i;return Math.acos(Math.min(Math.max(s,-1),1))}function Bo(t){return t[0]=0,t[1]=0,t}function No(t){return"vec2("+t[0]+", "+t[1]+")"}function qo(t,e){return t[0]===e[0]&&t[1]===e[1]}function zo(t,e){var r=t[0],n=t[1],a=e[0],o=e[1];return Math.abs(r-a)<=f*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))}var Wo=Eo,ko=lo,Go=fo,Xo=Mo,Yo=yo,Ho=To,Ko=Ao,Zo=function(){var t=oo();return function(e,r,n,a,o,i){var s,c;for(r||(r=2),n||(n=0),c=a?Math.min(a*r+n,e.length):e.length,s=n;s<c;s+=r)t[0]=e[s],t[1]=e[s+1],o(t,t,i),e[s]=t[0],e[s+1]=t[1];return e}}()},7654:(t,e,r)=>{r.r(e),r.d(e,{default:()=>p});var n=r(3379),a=r.n(n),o=r(7795),i=r.n(o),s=r(569),c=r.n(s),u=r(3565),h=r.n(u),l=r(9216),d=r.n(l),f=r(4589),M=r.n(f),x=r(5426),m={};m.styleTagTransform=M(),m.setAttributes=h(),m.insert=c().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=d(),a()(x.Z,m);const p=x.Z&&x.Z.locals?x.Z.locals:void 0},3379:t=>{var e=[];function r(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].identifier===t){r=n;break}return r}function n(t,n){for(var o={},i=[],s=0;s<t.length;s++){var c=t[s],u=n.base?c[0]+n.base:c[0],h=o[u]||0,l="".concat(u," ").concat(h);o[u]=h+1;var d=r(l),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var M=a(f,n);n.byIndex=s,e.splice(s,0,{identifier:l,updater:M,references:1})}i.push(l)}return i}function a(t,e){var r=e.domAPI(e);return r.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;r.update(t=e)}else r.remove()}}t.exports=function(t,a){var o=n(t=t||[],a=a||{});return function(t){t=t||[];for(var i=0;i<o.length;i++){var s=r(o[i]);e[s].references--}for(var c=n(t,a),u=0;u<o.length;u++){var h=r(o[u]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=c}}},569:t=>{var e={};t.exports=function(t,r){var n=function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[t]=r}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,r)=>{t.exports=function(t){var e=r.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(r){!function(t,e,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,a&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,r)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},2965:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractScene=void 0,e.AbstractScene=class{init(t=null){}}},3591:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ElementBufferObject=void 0;const n=r(7415);e.ElementBufferObject=class{constructor(t){this.ebo=n.context.createBuffer(),n.context.bindBuffer(n.context.ELEMENT_ARRAY_BUFFER,this.ebo),n.context.bufferData(n.context.ELEMENT_ARRAY_BUFFER,new Uint32Array(t),n.context.STATIC_DRAW)}bind(){n.context.bindBuffer(n.context.ELEMENT_ARRAY_BUFFER,this.ebo)}unbind(){n.context.bindBuffer(n.context.ELEMENT_ARRAY_BUFFER,null)}draw(t){n.context.drawArrays(n.context.TRIANGLES,0,t)}}},5449:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VertexBufferObject=void 0;const n=r(7415);e.VertexBufferObject=class{constructor(t,e=0,r=n.context.STATIC_DRAW){this.vbo=n.context.createBuffer(),n.context.bindBuffer(n.context.ARRAY_BUFFER,this.vbo),null!==t?n.context.bufferData(n.context.ARRAY_BUFFER,new Float32Array(t),r):n.context.bufferData(n.context.ARRAY_BUFFER,e,r)}update(t){this.bindAndExecute((()=>{n.context.bufferSubData(n.context.ARRAY_BUFFER,0,t)}))}bind(){n.context.bindBuffer(n.context.ARRAY_BUFFER,this.vbo)}unbind(){n.context.bindBuffer(n.context.ARRAY_BUFFER,null)}draw(t){n.context.drawArrays(n.context.TRIANGLES,0,t)}bindAndExecute(t){this.bind(),t(),this.unbind()}}},8974:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VertexArrayObject=void 0;const n=r(7415);e.VertexArrayObject=class{constructor(){this.vao=n.context.createVertexArray()}bind(){n.context.bindVertexArray(this.vao)}unbind(){n.context.bindVertexArray(null)}bindVertexBufferToAttribute(t,e,r,a,o,i=0){this.bindAndExecute((()=>{t.bind(),n.context.enableVertexAttribArray(e),n.context.vertexAttribPointer(e,r,n.context.FLOAT,!1,a*Float32Array.BYTES_PER_ELEMENT,o*Float32Array.BYTES_PER_ELEMENT),n.context.vertexAttribDivisor(e,i)}))}bindElementBuffer(t){this.bindAndExecute((()=>{t.bind()})),t.unbind()}bindAndExecute(t){this.bind(),t(),this.unbind()}}},2874:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Window=void 0;const n=r(9679),a=r(5849),o=r(7415),i=r(7415);r(7654),e.Window=class{constructor(t,e,r,i){this.width=e,this.height=r,this.logger=new a.Logger("Window"),this.scene=i;const s=document.getElementById(t);s.width=e,s.height=r,s.style.cssText="image-rendering: optimizeSpeed;image-rendering: -moz-crisp-edges;image-rendering: -o-crisp-edges;image-rendering: -webkit-crisp-edges;image-rendering: crisp-edges;image-rendering: -webkit-optimize-contrast;image-rendering: pixelated; -ms-interpolation-mode: nearest-neighbor;";const c=s.getContext("webgl2",{antialias:!0,premultipliedAlpha:!1});if(null===c)throw new Error("Could not initialize WebGL rendering context.");this.logger.info("WebGL2RenderingContext: ",c),this.logger.info("WebGLContextAttributes: ",c.getContextAttributes()),o.setCurrentContext(c),s.addEventListener("click",(t=>{t.preventDefault(),n.PointerLockUtils.requestLock(s)})),this.logger.info("Pointer Lock:",n.PointerLockUtils.isAvailable()),this.draw=this.draw.bind(this),this.canvas=s,this.logger.info("BUILD DATE:","2023-01-13T00:03:33.946Z")}addScene(t){this.scene=t}start(){this.scene.preload().then((()=>{this.defaultInitialization(),this.scene.init(this.canvas),this.draw()}))}defaultInitialization(){i.context.clearColor(0,0,0,1),i.context.clearDepth(1),i.context.enable(i.context.DEPTH_TEST),i.context.depthFunc(i.context.LEQUAL),i.context.viewport(0,0,this.width,this.height)}draw(){this.scene.draw(),requestAnimationFrame(this.draw)}}},5849:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.logger=e.Logger=void 0;class r{constructor(t){this.context=this.padEnd(t||"",20," ")}info(t,...e){console.info((new Date).toISOString(),"INFO","["+this.context+"]","      ",":",t,...e)}measure(t,e,...r){console.info((new Date).toISOString(),"INFO","["+this.context+"]",this.padStart(t.toString()+" ms",6," "),":",e,...r)}padEnd(t,e,r){const n=r.repeat(e);return String(t+n).slice(0,n.length)}padStart(t,e,r){const n=r.repeat(e);return String(n+t).slice(-n.length)}}e.Logger=r,e.logger=new r},7415:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setCurrentContext=e.context=void 0,e.context=null,e.setCurrentContext=function(t){e.context=t}},9679:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PointerLockUtils=void 0,e.PointerLockUtils=class{static isAvailable(){return"pointerLockElement"in document}static requestLock(t){t.requestPointerLock()}static releaseLock(){document.exitPointerLock()}}},635:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractShader=void 0;const n=r(5849),a=r(7415);e.AbstractShader=class{constructor(t){this.shader=null;const e=a.context.createShader(this.getType());a.context.shaderSource(e,t),a.context.compileShader(e),this.shader=e,a.context.getShaderParameter(e,a.context.COMPILE_STATUS)||n.logger.info(a.context.getShaderInfoLog(e))}getShader(){return this.shader}delete(){a.context.deleteShader(this.getShader())}}},2513:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragmentShader=void 0;const n=r(7415),a=r(635);class o extends a.AbstractShader{getType(){return n.context.FRAGMENT_SHADER}}e.FragmentShader=o},1897:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShaderProgram=void 0;const n=r(5849),a=r(7415);e.ShaderProgram=class{constructor(t,e){if(this.program=a.context.createProgram(),a.context.attachShader(this.program,t.getShader()),a.context.attachShader(this.program,e.getShader()),a.context.linkProgram(this.program),!a.context.getProgramParameter(this.program,a.context.LINK_STATUS))throw n.logger.info(a.context.getProgramInfoLog(this.program)),a.context.deleteProgram(this.program),new Error;a.context.validateProgram(this.program),a.context.getProgramParameter(this.program,a.context.VALIDATE_STATUS)||n.logger.info(a.context.getProgramInfoLog(this.program))}getProgram(){return this.program}getAttributeLocation(t){return a.context.getAttribLocation(this.program,t)}getUnifromLocation(t){return a.context.getUniformLocation(this.program,t)}use(){a.context.useProgram(this.program)}}},2218:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VertexShader=void 0;const n=r(7415),a=r(635);class o extends a.AbstractShader{getType(){return n.context.VERTEX_SHADER}}e.VertexShader=o},1355:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Texture=void 0;const n=r(7415),a=r(956);e.Texture=class{constructor(){this.texture=null,this.texture=n.context.createTexture()}getWebGLTexture(){return this.texture}setHTMLImageElementData(t){this.bindAndExecute((()=>{n.context.texImage2D(n.context.TEXTURE_2D,0,n.context.RGBA,n.context.RGBA,n.context.UNSIGNED_BYTE,t)}))}setTextureMinFilter(t){this.bindAndExecute((()=>{n.context.texParameteri(n.context.TEXTURE_2D,n.context.TEXTURE_MIN_FILTER,t)}))}setTextureMagFilter(t){this.bindAndExecute((()=>{n.context.texParameteri(n.context.TEXTURE_2D,n.context.TEXTURE_MAG_FILTER,t)}))}setTextureWrapS(t){this.bindAndExecute((()=>{n.context.texParameteri(n.context.TEXTURE_2D,n.context.TEXTURE_WRAP_S,t)}))}setTextureWrapT(t){this.bindAndExecute((()=>{n.context.texParameteri(n.context.TEXTURE_2D,n.context.TEXTURE_WRAP_T,t)}))}setupEmptyTexture(t,e){this.bindAndExecute((()=>{n.context.texImage2D(n.context.TEXTURE_2D,0,n.context.RGBA,t,e,0,n.context.RGBA,n.context.UNSIGNED_BYTE,null)}))}blocky(){n.context.bindTexture(n.context.TEXTURE_2D,this.texture),n.context.texParameteri(n.context.TEXTURE_2D,n.context.TEXTURE_MIN_FILTER,n.context.NEAREST),n.context.texParameteri(n.context.TEXTURE_2D,n.context.TEXTURE_MAG_FILTER,n.context.NEAREST)}bind(t=a.TextureUnit.UNIT_0){n.context.activeTexture(t),n.context.bindTexture(n.context.TEXTURE_2D,this.texture)}bindAndExecute(t){const e=n.context.getParameter(n.context.TEXTURE_BINDING_2D);n.context.bindTexture(n.context.TEXTURE_2D,this.texture),t(),n.context.bindTexture(n.context.TEXTURE_2D,e)}}},1266:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureFilterMode=void 0,(r=e.TextureFilterMode||(e.TextureFilterMode={}))[r.NEAREST=WebGL2RenderingContext.NEAREST]="NEAREST",r[r.LINEAR=WebGL2RenderingContext.LINEAR]="LINEAR"},956:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureUnit=void 0,(r=e.TextureUnit||(e.TextureUnit={}))[r.UNIT_0=WebGL2RenderingContext.TEXTURE0]="UNIT_0",r[r.UNIT_1=WebGL2RenderingContext.TEXTURE1]="UNIT_1"},1461:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureWrapMode=void 0,(r=e.TextureWrapMode||(e.TextureWrapMode={}))[r.CLAMP_TO_EDGE=WebGL2RenderingContext.CLAMP_TO_EDGE]="CLAMP_TO_EDGE",r[r.REPEAT=WebGL2RenderingContext.REPEAT]="REPEAT"},8359:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShaderUtils=void 0;const n=r(5849),a=r(2513),o=r(1897),i=r(2218);class s{static loadShader(t){const e=Date.now();return fetch(t).then((t=>t.text())).finally((()=>{s.logger.measure(Date.now()-e,"Finished loading shader source: "+t)}))}static createProgram(t,e){const r=Date.now();return Promise.all([s.loadShader(t),s.loadShader(e)]).then((t=>new o.ShaderProgram(new i.VertexShader(t[0]),new a.FragmentShader(t[1])))).finally((()=>{s.logger.info(s.logger.padEnd("Finished creating shader program.",20," "),"Duration: "+(Date.now()-r)+" ms")}))}}e.ShaderUtils=s,s.logger=new n.Logger("ShaderUtils")},5675:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureUtils=void 0;const n=r(1355),a=r(1266),o=r(1461);e.TextureUtils=class{static load(t){return new Promise((e=>{const r=new Image;r.src=t,r.addEventListener("load",(t=>e(r)))})).then((t=>{const e=new n.Texture;return e.setHTMLImageElementData(t),e.setTextureMagFilter(a.TextureFilterMode.LINEAR),e.setTextureMinFilter(a.TextureFilterMode.LINEAR),e.setTextureWrapS(o.TextureWrapMode.REPEAT),e.setTextureWrapT(o.TextureWrapMode.REPEAT),e}))}}},2254:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ControllableCamera=void 0;const n=r(887),a=r(2924);e.ControllableCamera=class{constructor(t,e){this.yaw=0,this.mat=n.mat4.create(),this.position=t,this.yaw=e}getMatrix(){return n.mat4.identity(this.mat),n.mat4.scale(this.mat,this.mat,[4,4,4]),n.mat4.rotateY(this.mat,this.mat,-this.yaw),n.mat4.translate(this.mat,this.mat,[-this.position.x,0,-this.position.z])}moveForward(t,e){let r=t*e;this.position.x+=r*-Math.sin(this.yaw),this.position.z+=r*-Math.cos(this.yaw)}getDirection(){return new a.Vector4f(-Math.sin(this.yaw),0,-Math.cos(this.yaw))}getOrthoDirection(){return new a.Vector4f(-Math.sin(this.yaw-Math.PI/2),0,-Math.cos(this.yaw-Math.PI/2))}moveBackward(t,e){let r=t*e;this.position.x-=r*-Math.sin(this.yaw),this.position.z-=r*-Math.cos(this.yaw)}turnLeft(t,e){let r=t*e;this.yaw+=r}moveLeft(t,e){let r=t*e;this.position.x+=r*-Math.sin(this.yaw+Math.PI/2),this.position.z+=r*-Math.cos(this.yaw+Math.PI/2)}moveRight(t,e){let r=t*e;this.position.x+=r*-Math.sin(this.yaw-Math.PI/2),this.position.z+=r*-Math.cos(this.yaw-Math.PI/2)}turnRight(t,e){let r=t*e;this.yaw-=r}}},6277:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Enemy=void 0,e.Enemy=class{constructor(t,e){this.position=t,this.upd=e}update(){this.position=this.upd?this.upd():this.position}}},4721:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GreenShaderProgram=void 0;const n=r(5849),a=r(7415),o=r(2513),i=r(1897),s=r(2218),c=r(8359);class u extends i.ShaderProgram{static create(){const t=Date.now();return Promise.all([c.ShaderUtils.loadShader(r(409)),c.ShaderUtils.loadShader(r(504))]).then((t=>new u(t[0],t[1]))).finally((()=>{u.logger.measure(Date.now()-t,"Finished creating shader program.")}))}constructor(t,e){super(new s.VertexShader(t),new o.FragmentShader(e)),this.setupUniforms()}setModelViewMatrix(t){a.context.uniformMatrix4fv(this.projectionMatrixLocation,!1,t)}setProjectionMatrix(t){a.context.uniformMatrix4fv(this.modelViewMatrixLocation,!1,t)}setTextureUnit(t){a.context.uniform1i(this.textureUnit,t)}setTextureUni2t(t){a.context.uniform1i(this.textureUnit2,t)}setPos(t){a.context.uniform3f(this.pos,t.x,t.y,t.z)}setScale(t){a.context.uniform1f(this.scale,t)}setColor(t){a.context.uniform4f(this.color,t.x,t.y,t.z,t.w)}setupUniforms(){this.modelViewMatrixLocation=a.context.getUniformLocation(this.program,"modelViewMatrix"),this.projectionMatrixLocation=a.context.getUniformLocation(this.program,"projectionMatrix"),this.textureUnit=a.context.getUniformLocation(this.program,"utexture"),this.textureUnit2=a.context.getUniformLocation(this.program,"utexture2"),this.pos=a.context.getUniformLocation(this.program,"position"),this.color=a.context.getUniformLocation(this.program,"color"),this.scale=a.context.getUniformLocation(this.program,"scale")}}e.GreenShaderProgram=u,u.logger=new n.Logger("SpriteSahderProgram")},8640:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Key=e.Keyboard=void 0;class r{static getCode(t){return t.charCodeAt(0)}constructor(){this.pressed=new Array(256),this.pressed.fill(!1),window.addEventListener("keyup",(t=>this.onKeyUp(t)),!1),window.addEventListener("keydown",(t=>this.onKeyDown(t)),!1)}isDown(t){return this.pressed[t]}onKeyDown(t){this.pressed[t.keyCode]=!0}onKeyUp(t){this.pressed[t.keyCode]=!1}}var n;e.Keyboard=r,(n=e.Key||(e.Key={}))[n.LEFT=37]="LEFT",n[n.UP=38]="UP",n[n.RIGHT=39]="RIGHT",n[n.DOWN=40]="DOWN",n[n.A=65]="A",n[n.D=68]="D",n[n.L=76]="L",n[n.W=r.getCode("W")]="W",n[n.S=r.getCode("S")]="S"},2530:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.MouseButton=void 0,(r=e.MouseButton||(e.MouseButton={}))[r.LEFT_BUTTON=0]="LEFT_BUTTON",r[r.MIDDLE_BUTTON=1]="MIDDLE_BUTTON",r[r.RIGHT_BUTTON=2]="RIGHT_BUTTON"},5303:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ReflectionMappingScene=void 0;const n=r(887),a=r(2965),o=r(7415),i=r(956),s=r(5675),c=r(3591),u=r(5449),h=r(8974),l=r(8657),d=r(5430),f=r(2924),M=r(2254),x=r(6277),m=r(4721),p=r(8640),b=r(2530),v=r(6927);class g{constructor(t,e){this.pos=t,this.direction=e}advance(t){this.pos=this.pos.add(this.direction.mul(.2))}}class w{constructor(){this.bullets=new Array,this.index=0,this.count=10}addBullet(t){this.bullets[this.index]=t,this.index=(this.index+1)%this.count}}class y extends a.AbstractScene{constructor(){super(...arguments),this.projectionMatrix=n.mat4.create(),this.modelViewMatrix=n.mat4.create(),this.lastBullet=Date.now(),this.bulletSystem=new w,this.moveAnim=0,this.moveAnimScale=.015,this.level=[[1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1],[1,0,0,1,1,1,0,0,1,1,1,1,1,0,0,1,0,1,0,0,1],[1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[1,0,0,1,1,1,0,0,1,1,1,1,1,0,0,1,0,1,0,0,1],[1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1],[1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1]],this.levelColor=[[1,1,1,1,1,6,1,1,1,0,0,0,1,1,1,1,1,4,3,5,5],[1,2,2,2,2,6,2,2,1,0,0,0,1,0,0,0,0,0,4,3,5],[1,2,2,2,2,6,2,4,4,0,0,0,4,0,0,0,0,0,4,4,3],[3,3,3,3,1,6,3,3,3,5,5,5,3,4,0,1,1,1,0,0,4],[3,3,3,3,1,3,3,3,5,5,5,5,5,3,4,1,1,1,0,0,1],[3,3,3,3,1,3,3,3,3,5,5,5,3,4,0,1,1,4,0,0,4],[1,2,2,2,2,2,2,4,4,0,0,0,4,0,0,1,1,3,4,4,3],[1,2,2,2,2,2,2,2,1,0,0,0,1,0,0,1,1,5,3,3,5],[1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,5,5,5,5]],this.colorList=[new f.Vector4f(1,1,1),new f.Vector4f(1,1,1),new f.Vector4f(1,1,1),new f.Vector4f(.5,.5,.5),new f.Vector4f(.74,.74,.74),new f.Vector4f(.25,.25,.25),new f.Vector4f(.75,.5,.5)],this.camera=new M.ControllableCamera(new f.Vector4f(1.5,0,1.5),2*Math.PI/360*-90),this.keyboard=new p.Keyboard,this.turnRight=0,this.turnLeft=0,this.mouseDown=!1,this.enemyList=new Array,this.frameCounter=0,this.lastTime=null,this.fps=0}preload(){return Promise.all([m.GreenShaderProgram.create().then((t=>{this.spriteShader=t})),v.TextureMappingShaderProgram.create().then((t=>{this.colorShaderProgram=t})),s.TextureUtils.load(r(5006)).then((t=>{t.blocky(),this.texture=t})),l.BackgroundImage.create(r(9402)).then((t=>{t.setPosition(384,113,512,256),this.backgroundImage=t})),s.TextureUtils.load(r(7278)).then((t=>{t.blocky(),this.texture2=t})),s.TextureUtils.load(r(4790)).then((t=>{t.blocky(),this.bulletTexture=t})),d.TextWriter.create(r(5463),32,2,8,8," !'><@+'()@+,-./0123456789:; = ? ABCDEFGHIJKLMNOPQRSTUVWXYZ").then((t=>this.textWriter=t))])}init(t){this.enemyList.push(new x.Enemy(new f.Vector4f(1.5,-.5,4.5))),this.enemyList.push(new x.Enemy(new f.Vector4f(1.5,-.5,5.5))),this.enemyList.push(new x.Enemy(new f.Vector4f(1.5,-.5,5.5),(()=>new f.Vector4f(5.5+2*Math.sin(5e-4*Date.now()),-.5,2+.5*Math.sin(.0014*Date.now()))))),t.addEventListener("mousedown",(t=>{t.button===b.MouseButton.LEFT_BUTTON&&(this.mouseDown=!0)})),t.addEventListener("mouseup",(t=>{t.button===b.MouseButton.LEFT_BUTTON&&(this.mouseDown=!1)})),document.addEventListener("mousemove",(t=>{document.pointerLockElement&&(t.movementX>0&&(this.turnRight+=t.movementX),t.movementX<0&&(this.turnLeft+=-t.movementX))}),!1);let e=1,r=2,n=[-.5,0,.5,1/8*e,1/16*r+1/16,.5,0,.5,1/8*e+1/8,1/16*r+1/16,.5,1,.5,1/8*e+1/8,1/16*r,.5,1,.5,1/8*e+1/8,1/16*r,-.5,1,.5,1/8*e,1/16*r,-.5,0,.5,1/8*e,1/16*r+1/16,.5,0,.5,1/8*e,1/16*r+1/16,.5,0,-.5,1/8*e+1/8,1/16*r+1/16,.5,1,-.5,1/8*e+1/8,1/16*r,.5,1,-.5,1/8*e+1/8,1/16*r,.5,1,.5,1/8*e,1/16*r,.5,0,.5,1/8*e,1/16*r+1/16,.5,0,-.5,1/8*e,1/16*r+1/16,-.5,0,-.5,1/8*e+1/8,1/16*r+1/16,-.5,1,-.5,1/8*e+1/8,1/16*r,-.5,1,-.5,1/8*e+1/8,1/16*r,.5,1,-.5,1/8*e,1/16*r,.5,0,-.5,1/8*e,1/16*r+1/16,-.5,0,-.5,1/8*e,1/16*r+1/16,-.5,0,.5,1/8*e+1/8,1/16*r+1/16,-.5,1,.5,1/8*e+1/8,1/16*r,-.5,1,.5,1/8*e+1/8,1/16*r,-.5,1,-.5,1/8*e,1/16*r,-.5,0,-.5,1/8*e,1/16*r+1/16];this.length=24,this.firstOff=24,e=0,r=1,n=n.concat([-.5,0,.5,1/8*e,1/16*r+1/16,.5,0,.5,1/8*e+1/8,1/16*r+1/16,.5,0,-.5,1/8*e+1/8,1/16*r,.5,0,-.5,1/8*e+1/8,1/16*r,-.5,0,-.5,1/8*e,1/16*r,-.5,0,.5,1/8*e,1/16*r+1/16]),r=7,n=n.concat([.5,1,.5,1/8*e+1/8,1/16*r+1/16,-.5,1,.5,1/8*e,1/16*r+1/16,.5,1,-.5,1/8*e+1/8,1/16*r,-.5,1,-.5,1/8*e,1/16*r,.5,1,-.5,1/8*e+1/8,1/16*r,-.5,1,.5,1/8*e,1/16*r+1/16]),this.vbo=new u.VertexBufferObject(n);const a=new h.VertexArrayObject;a.bindVertexBufferToAttribute(this.vbo,this.colorShaderProgram.getAttributeLocation("vertex"),3,5,0),a.bindVertexBufferToAttribute(this.vbo,this.colorShaderProgram.getAttributeLocation("texcoord"),2,5,3),o.context.clearColor(.28,.63,.21,1),o.context.cullFace(o.context.BACK),o.context.enable(o.context.CULL_FACE),this.colorShaderProgram.use(),this.colorShaderProgram.setModelViewMatrix2(this.computeProjectionMatrix()),this.texture.bind(),a.bind(),this.vao=a,this.initSprites()}initSprites(){const t=new u.VertexBufferObject([-.5,1,0,0,0,.5,1,0,1,0,.5,-0,0,1,1,-.5,-0,0,0,1]),e=new c.ElementBufferObject([3,1,0,3,2,1]),r=new h.VertexArrayObject;r.bindVertexBufferToAttribute(t,this.spriteShader.getAttributeLocation("vertex"),3,5,0),r.bindVertexBufferToAttribute(t,this.spriteShader.getAttributeLocation("texcoord"),2,5,3),r.bindElementBuffer(e),this.spriteShader.use(),this.spriteShader.setModelViewMatrix(this.computeProjectionMatrix()),this.vba=r}hit(t){let e=this.level[Math.floor(t.x)][Math.floor(t.z)];return 1===e||void 0===e}draw(){o.context.clear(o.context.COLOR_BUFFER_BIT|o.context.DEPTH_BUFFER_BIT),this.InputAndCollision(),this.drawLevel(),this.drawEnemies(),this.drawWeapon(),this.drawHeadUpDisplay()}drawHeadUpDisplay(){this.computeFPS(),this.textWriter.begin(),this.textWriter.setCurrentColor([1,0,0,1]),this.textWriter.setCurrentScale(2),this.textWriter.addText(8,8,"FPS: "+this.fps),this.textWriter.setCurrentColor([1,1,1,1]),this.textWriter.setCurrentScale(4),this.textWriter.addText(8,320,"100+"),this.textWriter.end(),this.textWriter.draw()}computeFPS(){const t=Date.now();null===this.lastTime?this.lastTime=t:t-this.lastTime>1e3&&(this.fps=this.frameCounter,this.frameCounter=0,this.lastTime=t),this.frameCounter++}drawEnemies(){this.vba.bind(),this.spriteShader.use(),this.texture2.bind(i.TextureUnit.UNIT_0),o.context.enable(o.context.BLEND),o.context.blendFuncSeparate(o.context.SRC_ALPHA,o.context.ONE_MINUS_SRC_ALPHA,o.context.ZERO,o.context.ONE);const t=n.mat4.translate(this.modelViewMatrix,this.camera.getMatrix(),[-0,Math.sin(this.moveAnim)*this.moveAnimScale-0,-0]);this.spriteShader.setProjectionMatrix(t),this.spriteShader.setScale(1),this.enemyList.forEach((t=>t.update())),this.enemyList.forEach((t=>{const e=this.colorList[this.levelColor[Math.floor(t.position.x)][Math.floor(t.position.z)]];this.spriteShader.setColor(e),this.spriteShader.setPos(t.position),o.context.drawElements(o.context.TRIANGLES,6,o.context.UNSIGNED_INT,0)})),this.bulletSystem.bullets&&(this.bulletTexture.bind(i.TextureUnit.UNIT_0),this.spriteShader.setColor(new f.Vector4f(1,1,1)),this.bulletSystem.bullets.forEach((t=>{if(!t.hitTime||t.hitTime+200>Date.now()){const e=t.pos;if(t.hitTime){let r;r=Date.now()-t.hitTime<100?.1*Math.sin(Math.PI/200*(Date.now()-t.hitTime)):.25*Math.sin(Math.PI/200*(Date.now()-t.hitTime)),this.spriteShader.setScale(r+.15),this.spriteShader.setPos(e.sub(new f.Vector4f(0,r/2,0)))}else this.spriteShader.setScale(.15),this.spriteShader.setPos(e);o.context.drawElements(o.context.TRIANGLES,6,o.context.UNSIGNED_INT,0)}})))}drawWeapon(){const t=this.levelColor[Math.floor(this.camera.position.x)][Math.floor(this.camera.position.z)];this.backgroundImage.setColor(this.colorList[t]),this.backgroundImage.setPosition(384,173+3*Math.sin(.003*Date.now())*4,512,256),this.backgroundImage.draw()}InputAndCollision(){const t=new f.Vector4f(this.camera.position.x,this.camera.position.y,this.camera.position.z);let e=!1;this.keyboard.isDown(p.Key.W)&&(this.camera.moveForward(.04,1),e=!0),this.keyboard.isDown(p.Key.S)&&(this.camera.moveBackward(.04,1),e=!0),(this.keyboard.isDown(p.Key.LEFT)||this.turnLeft)&&(this.camera.turnLeft(.002*this.turnLeft,1),this.turnLeft=0),this.keyboard.isDown(p.Key.A)&&(this.camera.moveLeft(.04,1),e=!0),this.keyboard.isDown(p.Key.D)&&(this.camera.moveRight(.04,1),e=!0),(this.keyboard.isDown(p.Key.RIGHT)||this.turnRight)&&(this.camera.turnRight(.002*this.turnRight,1),this.turnRight=0),e&&(this.moveAnim+=.2);let r=new f.Vector4f(t.x,t.y,t.z);if(r.z=this.camera.position.z,r.z-t.z>0){const t=r.add(new f.Vector4f(-.25,0,.25)),e=r.add(new f.Vector4f(.25,0,.25));(this.hit(t)||this.hit(e))&&(r.z=Math.floor(t.z)-.2501)}else if(r.z-t.z<0){const t=r.add(new f.Vector4f(-.25,0,-.25)),e=r.add(new f.Vector4f(.25,0,-.25));(this.hit(t)||this.hit(e))&&(r.z=Math.floor(t.z)+1+.2501)}if(r.x=this.camera.position.x,r.x-t.x>0){const t=r.add(new f.Vector4f(.25,0,.25)),e=r.add(new f.Vector4f(.25,0,-.25));(this.hit(t)||this.hit(e))&&(r.x=Math.floor(t.x)-.2501)}else if(r.x-t.x<0){const t=r.add(new f.Vector4f(-.25,0,.25)),e=r.add(new f.Vector4f(-.25,0,-.25));(this.hit(t)||this.hit(e))&&(r.x=Math.floor(t.x)+1+.2501)}this.camera.position=r,this.bulletSystem.bullets&&this.bulletSystem.bullets.forEach((t=>{if(!t.hitTime){const e=t.pos;t.advance(),this.enemyList=this.enemyList.filter((r=>{const n=r.position.sub(t.pos).length()<.5;return n&&(t.pos=e,t.hitTime=Date.now()),!n})),!t.hitTime&&this.hit(t.pos)&&(t.pos=e,t.hitTime=Date.now())}})),(this.keyboard.isDown(p.Key.L)||this.mouseDown)&&this.lastBullet+200<Date.now()&&(this.lastBullet=Date.now(),this.bulletSystem.addBullet(new g(new f.Vector4f(this.camera.position.x,this.camera.position.y-.12,this.camera.position.z).add(this.camera.getOrthoDirection().mul(.07)).add(this.camera.getDirection().mul(.25)),this.camera.getDirection())))}drawLevel(){let t=this.camera.getMatrix();this.vao.bind(),this.texture.bind(),this.colorShaderProgram.use(),o.context.cullFace(o.context.BACK),o.context.enable(o.context.CULL_FACE);for(let e=0;e<this.level.length;e++)for(let r=0;r<this.level[e].length;r++)if(this.colorShaderProgram.setColor(this.colorList[this.levelColor[e][r]]),1===this.level[e][r]){let n=this.computeModelViewMatrix(e,r,t);this.colorShaderProgram.setModelViewMatrix(n),o.context.drawArrays(o.context.TRIANGLES,0,this.length)}else{let n=this.computeModelViewMatrix(e,r,t);this.colorShaderProgram.setModelViewMatrix(n),o.context.drawArrays(o.context.TRIANGLES,this.firstOff,12)}}computeProjectionMatrix(){return n.mat4.perspective(this.projectionMatrix,45*Math.PI/180,640/360,.1,100)}computeModelViewMatrix(t,e,r){return n.mat4.translate(this.modelViewMatrix,r,[-0,Math.sin(this.moveAnim)*this.moveAnimScale-.5,-0]),n.mat4.translate(this.modelViewMatrix,this.modelViewMatrix,[t+.5,0,e+.5])}}e.ReflectionMappingScene=y},6927:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureMappingShaderProgram=void 0;const n=r(5849),a=r(7415),o=r(2513),i=r(1897),s=r(2218),c=r(8359);class u extends i.ShaderProgram{static create(){const t=Date.now();return Promise.all([c.ShaderUtils.loadShader(r(8507)),c.ShaderUtils.loadShader(r(7882))]).then((t=>new u(t[0],t[1]))).finally((()=>{u.logger.measure(Date.now()-t,"Finished creating shader program.")}))}constructor(t,e){super(new s.VertexShader(t),new o.FragmentShader(e)),this.setupUniforms()}setModelViewMatrix2(t){a.context.uniformMatrix4fv(this.projectionMatrixLocation,!1,t)}setModelViewMatrix(t){a.context.uniformMatrix4fv(this.modelViewMatrixLocation,!1,t)}setColor(t){a.context.uniform4fv(this.color,new Float32Array([t.x,t.y,t.z,0]))}setupUniforms(){this.modelViewMatrixLocation=a.context.getUniformLocation(this.program,"modelViewMatrix"),this.projectionMatrixLocation=a.context.getUniformLocation(this.program,"projectionMatrix"),this.color=a.context.getUniformLocation(this.program,"color")}}e.TextureMappingShaderProgram=u,u.logger=new n.Logger("TextureMappingShaderProgram")},8657:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundImage=void 0;const n=r(887),a=r(956),o=r(5675),i=r(5449),s=r(8974),c=r(2924),u=r(7415),h=r(9948);class l{constructor(){this.color=new c.Vector4f(1,1,1)}static create(t=r(3769)){return(new l).init(t)}draw(){u.context.disable(u.context.CULL_FACE),u.context.depthMask(!1),this.texture.bind(a.TextureUnit.UNIT_0),this.vertexArrayObject.bind(),this.shader.use(),this.shader.setProjectionMatrix(this.computeModelViewMatrix(this.position.x,this.position.y,this.position.z,this.position.w)),this.shader.setColor(this.color),u.context.enable(u.context.BLEND),u.context.blendFuncSeparate(u.context.SRC_ALPHA,u.context.ONE_MINUS_SRC_ALPHA,u.context.ZERO,u.context.ONE),u.context.drawArrays(u.context.TRIANGLES,0,6),u.context.disable(u.context.BLEND),u.context.depthMask(!0),u.context.enable(u.context.CULL_FACE)}setPosition(t,e,r,n){this.position=new c.Vector4f(t,e,r,n)}setColor(t){this.color=t}computeModelViewMatrix(t,e,r,a){const o=n.mat4.create();return n.mat4.identity(o),n.mat4.translate(o,o,[2/640*t-1,1-2/360*e,0]),n.mat4.scale(o,o,[2/640*r,-2/360*a,1])}preloadResources(t){return Promise.all([h.GreenShaderProgram.create().then((t=>{this.shader=t})),o.TextureUtils.load(t).then((t=>{t.blocky(),this.texture=t}))])}setupEffect(){const t=new i.VertexBufferObject([0,0,0,0,1,0,1,0,0,1,0,1,1,0,1,0,1,1,1,1,0,1,0,1]),e=new s.VertexArrayObject;e.bind(),this.vertexArrayObject=e,e.bindVertexBufferToAttribute(t,this.shader.getAttributeLocation("vertex"),2,4,0),e.bindVertexBufferToAttribute(t,this.shader.getAttributeLocation("texcoord"),2,4,2),this.shader.use(),this.shader.setModelViewMatrix(this.computeProjectionMatrix()),this.shader.setColor(new c.Vector4f(1,1,1)),this.shader.setTextureUnit(0)}init(t){return this.setPosition(0,0,640,360),this.preloadResources(t).then((()=>(this.setupEffect(),this)))}computeProjectionMatrix(){return n.mat4.identity(n.mat4.create())}}e.BackgroundImage=l},9948:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GreenShaderProgram=void 0;const n=r(5849),a=r(7415),o=r(2513),i=r(1897),s=r(2218),c=r(8359);class u extends i.ShaderProgram{static create(){const t=Date.now();return Promise.all([c.ShaderUtils.loadShader(r(5930)),c.ShaderUtils.loadShader(r(6046))]).then((t=>new u(t[0],t[1]))).finally((()=>{u.logger.measure(Date.now()-t,"Finished creating shader program.")}))}constructor(t,e){super(new s.VertexShader(t),new o.FragmentShader(e)),this.setupUniforms()}setModelViewMatrix(t){a.context.uniformMatrix4fv(this.projectionMatrixLocation,!1,t)}setProjectionMatrix(t){a.context.uniformMatrix4fv(this.modelViewMatrixLocation,!1,t)}setTextureUnit(t){a.context.uniform1i(this.textureUnit,t)}setColor(t){a.context.uniform4fv(this.color,new Float32Array([t.x,t.y,t.z,1]))}setupUniforms(){this.modelViewMatrixLocation=a.context.getUniformLocation(this.program,"modelViewMatrix"),this.projectionMatrixLocation=a.context.getUniformLocation(this.program,"projectionMatrix"),this.textureUnit=a.context.getUniformLocation(this.program,"utexture"),this.color=a.context.getUniformLocation(this.program,"color")}}e.GreenShaderProgram=u,u.logger=new n.Logger("BackgroundImageShader")},5430:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextWriter=void 0;const n=r(887),a=r(7415),o=r(5675),i=r(8974),s=r(1266),c=r(956),u=r(5449),h=r(8349);class l{constructor(){this.currentColor=[0,1,0,1],this.currentScale=2,this.projectionMatrix=n.mat4.create(),this.modelViewMatrix=n.mat4.create(),this.numCharacters=0,this.array=[],this.color=[]}static create(t,e,r,n,a,o){return(new l).init(t,e,r,n,a,o)}getCurrentColor(){return this.currentColor}setCurrentColor(t){this.currentColor=t}getCurrentScale(){return this.currentScale}setCurrentScale(t){this.currentScale=t}addText(t,e,r){let n=t,a=e;const o=this.currentScale;for(let e=0;e<r.length;e++){const i=r.charCodeAt(e);if(i==="\n".charCodeAt(0)){n=t,a+=this.h*o;continue}const s=this.charToIndex.has(i)?this.charToIndex.get(i):0,c=Math.floor(s%this.xfonts),u=Math.floor(s/this.xfonts),h=1/this.yfonts,l=1/this.xfonts;this.array.push(n+0,0+a,c*l+0,0+u*h,n+this.w*o,0+a,c*l+l,0+u*h,n+0,this.h*o+a,c*l+0,h+u*h,n+this.w*o,0+a,c*l+l,0+u*h,n+this.w*o,this.h*o+a,c*l+l,h+u*h,n+0,this.h*o+a,c*l+0,h+u*h),this.color.push(...this.currentColor),this.color.push(...this.currentColor),this.color.push(...this.currentColor),this.color.push(...this.currentColor),this.color.push(...this.currentColor),this.color.push(...this.currentColor),n+=this.w*o,this.numCharacters++}}begin(){this.array=[],this.color=[]}end(){this.ColorVbo.update(new Float32Array(this.color.slice(0,4*l.MAX_VERTICES))),this.vbo.update(new Float32Array(this.array.slice(0,4*l.MAX_VERTICES)))}computeProjectionMatrix(){return n.mat4.ortho(this.projectionMatrix,0,640,360,0,-1,1)}computModelMatrix(){return n.mat4.identity(this.modelViewMatrix),this.modelViewMatrix}draw(){this.vba.bind(),this.shader.use(),this.texture.bind(c.TextureUnit.UNIT_0),a.context.enable(a.context.BLEND),a.context.disable(a.context.CULL_FACE),a.context.blendFuncSeparate(a.context.SRC_ALPHA,a.context.ONE_MINUS_SRC_ALPHA,a.context.ZERO,a.context.ONE),a.context.drawArrays(a.context.TRIANGLES,0,Math.min(6*this.numCharacters,l.MAX_VERTICES)),a.context.enable(a.context.CULL_FACE),a.context.disable(a.context.BLEND)}initVBOs(){this.texture.setTextureMagFilter(s.TextureFilterMode.NEAREST),this.texture.setTextureMinFilter(s.TextureFilterMode.NEAREST);const t=4*l.MAX_VERTICES*4,e=new u.VertexBufferObject(null,t,a.context.DYNAMIC_DRAW),r=new u.VertexBufferObject(null,t,a.context.DYNAMIC_DRAW),n=new i.VertexArrayObject;this.vbo=e,this.ColorVbo=r;const o=this.shader.getAttributeLocation("vertex"),c=this.shader.getAttributeLocation("texcoord"),h=this.shader.getAttributeLocation("color");n.bindVertexBufferToAttribute(e,o,2,4,0),n.bindVertexBufferToAttribute(e,c,2,4,2),n.bindVertexBufferToAttribute(r,h,4,4,0),this.shader.use(),this.shader.setModelViewMatrix(this.computeProjectionMatrix()),this.shader.setProjectionMatrix(this.computModelMatrix()),this.vba=n}addCharInex(t,e){this.charToIndex.set(t,e)}init(t,e,r,n,a,i){this.charToIndex=new Map;for(let t=0;t<i.length;t++)this.addCharInex(i.charCodeAt(t),t);return this.xfonts=e,this.yfonts=r,this.w=n,this.h=a,Promise.all([h.TextureMappingShaderProgram.create().then((t=>{this.shader=t})),o.TextureUtils.load(t).then((t=>this.texture=t))]).then((()=>(this.initVBOs(),this)))}}e.TextWriter=l,l.MAX_CHARS=200,l.MAX_VERTICES=6*l.MAX_CHARS},8349:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureMappingShaderProgram=void 0;const n=r(5849),a=r(7415),o=r(2513),i=r(1897),s=r(2218),c=r(8359);class u extends i.ShaderProgram{static create(){const t=Date.now();return Promise.all([c.ShaderUtils.loadShader(r(1317)),c.ShaderUtils.loadShader(r(5901))]).then((t=>new u(t[0],t[1]))).finally((()=>{u.logger.measure(Date.now()-t,"Finished creating shader program.")}))}constructor(t,e){super(new s.VertexShader(t),new o.FragmentShader(e)),this.setupUniforms()}setModelViewMatrix(t){a.context.uniformMatrix4fv(this.projectionMatrixLocation,!1,t)}setProjectionMatrix(t){a.context.uniformMatrix4fv(this.modelViewMatrixLocation,!1,t)}setColor(t){a.context.uniform4f(this.colorLocation,t[0],t[1],t[2],t[3])}setupUniforms(){this.modelViewMatrixLocation=a.context.getUniformLocation(this.program,"modelViewMatrix"),this.projectionMatrixLocation=a.context.getUniformLocation(this.program,"projectionMatrix"),this.colorLocation=a.context.getUniformLocation(this.program,"color")}}e.TextureMappingShaderProgram=u,u.logger=new n.Logger("TextureMappingShaderProgram")},2924:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Vector4f=void 0;class r{constructor(t,e,r,n=1){this.x=t,this.y=e,this.z=r,this.w=n}sub(t){return new r(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)}add(t){return new r(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)}cross(t){return new r(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x,0)}normalize(){const t=1/this.length();return this.mul(t)}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}mul(t){return new r(this.x*t,this.y*t,this.z*t,this.w)}componentWiseMul(t){return new r(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}}e.Vector4f=r},4790:(t,e,r)=>{t.exports=r.p+"d116af638e7ce868e584.png"},5006:(t,e,r)=>{t.exports=r.p+"5514c0817c7c83ad4620.png"},3769:(t,e,r)=>{t.exports=r.p+"a147a7a349e56f30cb25.png"},9402:(t,e,r)=>{t.exports=r.p+"f1e9dc0c66cc8ba305da.png"},7278:(t,e,r)=>{t.exports=r.p+"40d05722220c6b31aef2.png"},504:(t,e,r)=>{t.exports=r.p+"8b61dc1539c02b0df897.fs"},409:(t,e,r)=>{t.exports=r.p+"6adb0d51d226ff5090c6.vs"},7882:(t,e,r)=>{t.exports=r.p+"74d994cc1d26df11a1b1.frag"},8507:(t,e,r)=>{t.exports=r.p+"520243440a208272be49.vert"},6046:(t,e,r)=>{t.exports=r.p+"640b7e7e49e92cf00bae.fs"},5930:(t,e,r)=>{t.exports=r.p+"b1b6f94acbc869689270.vs"},5901:(t,e,r)=>{t.exports=r.p+"252d20bee8fa7bc3c754.frag"},1317:(t,e,r)=>{t.exports=r.p+"3f387091a90b4daa7130.vert"},5463:(t,e,r)=>{t.exports=r.p+"aa2528d7a8a813247c2d.png"}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={id:n,exports:{}};return t[n](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");n.length&&(t=n[n.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r.nc=void 0,(()=>{const t=r(2874),e=r(5303);(new class{main(){new t.Window("pulsar",640,360,new e.ReflectionMappingScene).start()}}).main()})()})();